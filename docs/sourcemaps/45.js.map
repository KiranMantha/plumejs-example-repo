{"version":3,"file":"scripts/45.7c3b4e64b4daf161c37c.bundle.js","mappings":"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","sources":["webpack:///./node_modules/@plumejs/router/dist/src/staticRouter.js","webpack:///./node_modules/@plumejs/router/dist/src/utils.js","webpack:///./node_modules/@plumejs/router/dist/src/internalRouter.service.js","webpack:///./node_modules/@plumejs/router/dist/src/router.component.js","webpack:///./node_modules/@plumejs/router/dist/src/router.service.js"],"sourcesContent":["export class StaticRouter {\n    static routeList = [];\n    static checkParams(urlParams, routeItem) {\n        let paramMapCount = 0;\n        const paramsObject = {}, paramCount = routeItem.paramCount;\n        for (let i = 0; i < urlParams.length; i++) {\n            const routeParam = routeItem.params[i];\n            if (routeParam.indexOf(':') >= 0) {\n                paramsObject[routeParam.split(':')[1]] = urlParams[i].split('?')[0];\n                paramMapCount += 1;\n            }\n        }\n        if (paramMapCount === paramCount) {\n            return paramsObject;\n        }\n        return {};\n    }\n    static getParamCount(params) {\n        let paramCount = 0;\n        params.forEach((param) => {\n            if (param.indexOf(':') >= 0) {\n                paramCount += 1;\n            }\n        });\n        return paramCount;\n    }\n    static formatRoute(route) {\n        const internalRouteItem = {\n            params: {},\n            url: '',\n            template: '',\n            paramCount: 0,\n            isRegistered: false,\n            redirectTo: '',\n            canActivate: () => true\n        };\n        internalRouteItem.params = route.path.split('/').filter((str) => {\n            return str.length > 0;\n        });\n        internalRouteItem.url = route.path;\n        internalRouteItem.template = '';\n        internalRouteItem.redirectTo = route.redirectTo;\n        if (route.template) {\n            if (!route.templatePath)\n                throw Error('templatePath is required in route if template is mentioned.');\n            internalRouteItem.template = route.template;\n            internalRouteItem.templatePath = route.templatePath;\n        }\n        if (route.canActivate)\n            internalRouteItem.canActivate = route.canActivate;\n        internalRouteItem.paramCount = StaticRouter.getParamCount(internalRouteItem.params);\n        StaticRouter.routeList.push(internalRouteItem);\n    }\n    static preloadRoutes() {\n        for (const route of StaticRouter.routeList) {\n            route.templatePath && route.templatePath();\n        }\n    }\n}\n","const isObservable = (obj) => !!obj && typeof obj.subscribe === 'function';\nconst isPromise = (obj) => !!obj && typeof obj.then === 'function';\nconst ofObs = (input) => {\n    return {\n        subscribe: (fn) => {\n            fn(input);\n        }\n    };\n};\nconst fromPromiseObs = (input) => {\n    return {\n        subscribe: (callback) => {\n            Promise.resolve(input).then((value) => {\n                callback(value);\n            });\n        }\n    };\n};\nclass SubjectObs {\n    _internalFn;\n    asObservable() {\n        return {\n            subscribe: (callback) => {\n                return this.subscribe(callback);\n            }\n        };\n    }\n    subscribe(callback) {\n        this._internalFn = callback;\n        return this.unsubscribe;\n    }\n    unsubscribe() {\n        this._internalFn = null;\n    }\n    next(value) {\n        this._internalFn(value);\n    }\n}\nconst wrapIntoObservable = (value) => {\n    if (isObservable(value)) {\n        return value;\n    }\n    if (isPromise(value)) {\n        return fromPromiseObs(Promise.resolve(value));\n    }\n    return ofObs(value);\n};\nconst fromVanillaEvent = (target, eventName, onNext, options = false) => {\n    target.addEventListener(eventName, onNext, options);\n    const unsubscribe = () => {\n        target.removeEventListener(eventName, onNext, options);\n    };\n    return unsubscribe;\n};\nexport { wrapIntoObservable, SubjectObs, fromVanillaEvent };\n","import { __decorate } from \"tslib\";\nimport { Injectable } from '@plumejs/core';\nimport { StaticRouter } from './staticRouter';\nimport { wrapIntoObservable, SubjectObs, fromVanillaEvent } from './utils';\nlet InternalRouter = class InternalRouter {\n    _currentRoute = {\n        path: '',\n        routeParams: new Map(),\n        queryParams: new Map(),\n        state: {}\n    };\n    _template = new SubjectObs();\n    _unSubscribeHashEvent;\n    startHashChange() {\n        this._unSubscribeHashEvent = fromVanillaEvent(window, 'hashchange', () => {\n            this._registerOnHashChange();\n        });\n    }\n    stopHashChange() {\n        this._unSubscribeHashEvent();\n    }\n    getTemplate() {\n        return this._template.asObservable();\n    }\n    getCurrentRoute() {\n        return this._currentRoute;\n    }\n    navigateTo(path = '', state) {\n        if (path) {\n            const windowHash = window.location.hash.replace(/^#/, '');\n            if (windowHash === path) {\n                this._navigateTo(path, state);\n            }\n            window.location.hash = '#' + path;\n        }\n        else {\n            this._navigateTo(path, state);\n        }\n    }\n    _registerOnHashChange() {\n        const path = window.location.hash.replace(/^#/, '');\n        this._navigateTo(path, null);\n    }\n    _routeMatcher(route, path) {\n        if (route) {\n            const _matcher = new RegExp(route.replace(/:[^\\s/]+/g, '([\\\\w-]+)'));\n            return path.match(_matcher);\n        }\n        else {\n            return route === path;\n        }\n    }\n    _navigateTo(path, state) {\n        const uParams = path.split('/').filter((h) => {\n            return h.length > 0;\n        });\n        const routeArr = StaticRouter.routeList.filter((route) => {\n            if (route.params.length === uParams.length && this._routeMatcher(route.url, path)) {\n                return route;\n            }\n            else if (route.url === path) {\n                return route;\n            }\n        });\n        const routeItem = routeArr.length > 0 ? routeArr[0] : null;\n        if (routeItem) {\n            this._currentRoute.path = path;\n            this._currentRoute.state = { ...(state || {}) };\n            wrapIntoObservable(routeItem.canActivate()).subscribe((val) => {\n                if (!val)\n                    return;\n                const _params = StaticRouter.checkParams(uParams, routeItem);\n                if (Object.keys(_params).length > 0 || path) {\n                    this._currentRoute.routeParams = new Map(Object.entries(_params));\n                    const entries = window.location.hash.split('?')[1]\n                        ? new URLSearchParams(window.location.hash.split('?')[1]).entries()\n                        : [];\n                    this._currentRoute.queryParams = new Map(entries);\n                    if (!routeItem.isRegistered) {\n                        if (routeItem.templatePath) {\n                            wrapIntoObservable(routeItem.templatePath()).subscribe(() => {\n                                routeItem.isRegistered = true;\n                                this._template.next(routeItem.template);\n                            });\n                        }\n                    }\n                    else {\n                        this._template.next(routeItem.template);\n                    }\n                }\n                else {\n                    this.navigateTo(routeItem.redirectTo, state);\n                }\n            });\n        }\n    }\n};\nInternalRouter = __decorate([\n    Injectable()\n], InternalRouter);\nexport { InternalRouter };\n","import { __decorate, __metadata } from \"tslib\";\nimport { Component, html, Renderer } from '@plumejs/core';\nimport { InternalRouter } from './internalRouter.service';\nlet RouterOutlet = class RouterOutlet {\n    internalRouterSrvc;\n    renderer;\n    _template = '';\n    _templateSubscription;\n    constructor(internalRouterSrvc, renderer) {\n        this.internalRouterSrvc = internalRouterSrvc;\n        this.renderer = renderer;\n    }\n    beforeMount() {\n        this._templateSubscription = this.internalRouterSrvc.getTemplate().subscribe((tmpl) => {\n            this._template = tmpl;\n            this.renderer.update();\n        });\n        this.internalRouterSrvc.startHashChange();\n    }\n    mount() {\n        const path = window.location.hash.replace(/^#/, '');\n        this.internalRouterSrvc.navigateTo(path, null);\n    }\n    unmount() {\n        this._templateSubscription();\n        this.internalRouterSrvc.stopHashChange();\n    }\n    render() {\n        if (this._template) {\n            const stringArray = [`${this._template}`];\n            stringArray.raw = [`${this._template}`];\n            return html(stringArray);\n        }\n        else {\n            return html ``;\n        }\n    }\n};\nRouterOutlet = __decorate([\n    Component({\n        selector: 'router-outlet',\n        deps: [InternalRouter, Renderer]\n    }),\n    __metadata(\"design:paramtypes\", [InternalRouter, Renderer])\n], RouterOutlet);\n","import { __decorate, __metadata } from \"tslib\";\nimport { Injectable } from '@plumejs/core';\nimport { InternalRouter } from './internalRouter.service';\nimport { StaticRouter } from './staticRouter';\nlet Router = class Router {\n    internalRouter;\n    constructor(internalRouter) {\n        this.internalRouter = internalRouter;\n    }\n    getCurrentRoute() {\n        return this.internalRouter.getCurrentRoute();\n    }\n    navigateTo(path, state) {\n        this.internalRouter.navigateTo(path, state);\n    }\n    static registerRoutes(routes, preloadAllRoutes = false) {\n        if (Array.isArray(routes)) {\n            for (const route of routes) {\n                StaticRouter.formatRoute(route);\n            }\n            preloadAllRoutes && StaticRouter.preloadRoutes();\n        }\n        else {\n            throw Error('router.addRoutes: the parameter must be an array');\n        }\n    }\n};\nRouter = __decorate([\n    Injectable({ deps: [InternalRouter] }),\n    __metadata(\"design:paramtypes\", [InternalRouter])\n], Router);\nexport { Router };\n"],"names":["StaticRouter","static","urlParams","routeItem","paramMapCount","paramsObject","paramCount","i","length","routeParam","params","indexOf","split","forEach","param","route","internalRouteItem","url","template","isRegistered","redirectTo","canActivate","path","filter","str","templatePath","Error","getParamCount","routeList","push","SubjectObs","_internalFn","asObservable","subscribe","callback","this","unsubscribe","next","value","wrapIntoObservable","obj","then","isPromise","input","Promise","resolve","fn","ofObs","InternalRouter","_currentRoute","routeParams","Map","queryParams","state","_template","_unSubscribeHashEvent","startHashChange","target","eventName","onNext","options","addEventListener","removeEventListener","fromVanillaEvent","window","_registerOnHashChange","stopHashChange","getTemplate","getCurrentRoute","navigateTo","location","hash","replace","_navigateTo","_routeMatcher","_matcher","RegExp","match","uParams","h","routeArr","val","_params","checkParams","Object","keys","entries","URLSearchParams","RouterOutlet","internalRouterSrvc","renderer","_templateSubscription","constructor","beforeMount","tmpl","update","mount","unmount","render","stringArray","raw","selector","deps","Router","internalRouter","routes","preloadAllRoutes","Array","isArray","formatRoute","preloadRoutes"],"sourceRoot":""}