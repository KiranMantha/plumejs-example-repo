"use strict";(self.webpackChunkplumejs_example_repo=self.webpackChunkplumejs_example_repo||[]).push([[602],{1602:(t,e,r)=>{e.F=void 0,r(346);var a=r(9282);Object.defineProperty(e,"F",{enumerable:!0,get:function(){return a.Router}})},1346:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InternalRouter=void 0;const a=r(655),o=r(8522),s=r(8698),n=r(4035);let i=class InternalRouter{_currentRoute={path:"",params:{},state:{}};_template=new s.Subject;constructor(){(0,s.fromEvent)(window,"hashchange").subscribe((()=>{this._registerOnHashChange()}))}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute}navigateTo(t="",e){if(t){window.location.hash.replace(/^#/,"")===t&&this._navigateTo(t,e),window.location.hash="#"+t}else this._navigateTo(t,e)}_registerOnHashChange(){const t=window.location.hash.replace(/^#/,"");this._navigateTo(t,null)}_routeMatcher(t,e){if(t){const r=new RegExp(t.replace(/:[^\s/]+/g,"([\\w-]+)"));return e.match(r)}return t===e}_navigateTo(t,e){const r=t.split("/").filter((t=>t.length>0)),a=n.StaticRouter.routeList.filter((e=>e.Params.length===r.length&&this._routeMatcher(e.Url,t)||e.Url===t?e:void 0)),s=a.length>0?a[0]:null;s&&(this._currentRoute.path=t,this._currentRoute.state={...e||{}},(0,o.wrapIntoObservable)(s.canActivate()).subscribe((a=>{if(!a)return;const i=n.StaticRouter.checkParams(r,s);Object.keys(i).length>0||t?(this._currentRoute.params=i,s.IsRegistered?this._template.next(s.Template):s.TemplatePath&&(0,o.wrapIntoObservable)(s.TemplatePath()).subscribe((()=>{s.IsRegistered=!0,this._template.next(s.Template)}))):this.navigateTo(s.redirectTo,e)})))}};i=(0,a.__decorate)([(0,o.Injectable)(),(0,a.__metadata)("design:paramtypes",[])],i),e.InternalRouter=i},346:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const a=r(655),o=r(8522),s=r(8698),n=r(1346);let i=class RouterOutlet{router;renderer;_template="";_subscriptions=new s.Subscription;constructor(t,e){this.router=t,this.renderer=e}beforeMount(){this._subscriptions.add(this.router.getTemplate().subscribe((t=>{this._template=t,this.renderer.update()})))}mount(){const t=window.location.hash.replace(/^#/,"");this.router.navigateTo(t,null)}unmount(){this._subscriptions.unsubscribe()}render(){if(this._template){const t=[`${this._template}`];return t.raw=[`${this._template}`],(0,o.html)(t)}return o.html``}};i=(0,a.__decorate)([(0,o.Component)({selector:"router-outlet"}),(0,a.__metadata)("design:paramtypes",[n.InternalRouter,o.Renderer])],i)},9282:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;const a=r(655),o=r(8522),s=r(3818),n=r(1346),i=r(4035);let u=class Router{internalRouter;constructor(t){this.internalRouter=t}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(t,e){this.internalRouter.navigateTo(t,e)}static registerRoutes(t,e=!1){if(!s.isNode){if(!Array.isArray(t))throw Error("router.addRoutes: the parameter must be an array");for(const e of t)i.StaticRouter.formatRoute(e);e&&i.StaticRouter.preloadRoutes()}}};u=(0,a.__decorate)([(0,o.Injectable)(),(0,a.__metadata)("design:paramtypes",[n.InternalRouter])],u),e.Router=u},4035:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StaticRouter=void 0;class StaticRouter{static routeList=[];static checkParams(t,e){let r=0;const a={},o=e.ParamCount;for(let o=0;o<t.length;o++){const s=e.Params[o];s.indexOf(":")>=0&&(a[s.split(":")[1]]=t[o],r+=1)}return r===o?a:{}}static getParamCount(t){let e=0;return t.forEach((t=>{t.indexOf(":")>=0&&(e+=1)})),e}static formatRoute(t){const e={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(e.Params=t.path.split("/").filter((t=>t.length>0)),e.Url=t.path,e.Template="",e.redirectTo=t.redirectTo,t.template){if(!t.templatePath)throw Error("templatePath is required in route if template is mentioned.");e.Template=t.template,e.TemplatePath=t.templatePath}t.canActivate&&(e.canActivate=t.canActivate),e.ParamCount=StaticRouter.getParamCount(e.Params),StaticRouter.routeList.push(e)}static preloadRoutes(){for(const t of StaticRouter.routeList)t.TemplatePath&&t.TemplatePath()}}e.StaticRouter=StaticRouter}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0cy82MDIuMzQ1YTE4YzQzZDZhYWY5YzQ2NjIuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiIySEFFQUEsRUFBUSxPQUFTLEVBQ2pCLEVBQVEsS0FDUixJQUFJQyxFQUFtQixFQUFRLE1BQy9CQyxPQUFPQyxlQUFlSCxFQUFTLElBQS9CLENBQTJDSSxZQUFZLEVBQU1DLElBQUssV0FBYyxPQUFPSixFQUFpQkssVyxlQ0p4R0osT0FBT0MsZUFBZUgsRUFBUyxhQUFjLENBQUVPLE9BQU8sSUFDdERQLEVBQVFRLG9CQUFpQixFQUN6QixNQUFNQyxFQUFVLEVBQVEsS0FDbEJDLEVBQVMsRUFBUSxNQUNqQkMsRUFBUyxFQUFRLE1BQ2pCQyxFQUFpQixFQUFRLE1BQy9CLElBQUlKLEVBQWlCLE1BQU1BLGVBQ3ZCSyxjQUFnQixDQUNaQyxLQUFNLEdBQ05DLE9BQVEsR0FDUkMsTUFBTyxJQUVYQyxVQUFZLElBQUlOLEVBQU9PLFFBQ3ZCQyxlQUNJLEVBQUlSLEVBQU9TLFdBQVdDLE9BQVEsY0FBY0MsV0FBVSxLQUNsREMsS0FBS0MsMkJBR2JDLGNBQ0ksT0FBT0YsS0FBS04sVUFBVVMsZUFFMUJDLGtCQUNJLE9BQU9KLEtBQUtWLGNBRWhCZSxXQUFXZCxFQUFPLEdBQUlFLEdBQ2xCLEdBQUlGLEVBQU0sQ0FDYU8sT0FBT1EsU0FBU0MsS0FBS0MsUUFBUSxLQUFNLE1BQ25DakIsR0FDZlMsS0FBS1MsWUFBWWxCLEVBQU1FLEdBRTNCSyxPQUFPUSxTQUFTQyxLQUFPLElBQU1oQixPQUc3QlMsS0FBS1MsWUFBWWxCLEVBQU1FLEdBRy9CUSx3QkFDSSxNQUFNVixFQUFPTyxPQUFPUSxTQUFTQyxLQUFLQyxRQUFRLEtBQU0sSUFDaERSLEtBQUtTLFlBQVlsQixFQUFNLE1BRTNCbUIsY0FBY0MsRUFBT3BCLEdBQ2pCLEdBQUlvQixFQUFPLENBQ1AsTUFBTUMsRUFBVyxJQUFJQyxPQUFPRixFQUFNSCxRQUFRLFlBQWEsY0FDdkQsT0FBT2pCLEVBQUt1QixNQUFNRixHQUdsQixP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WSxFQUNaNUMsY0FBYyxFQUNkSSxXQUFZLEdBQ1pULFlBQWEsS0FBTSxHQVF2QixHQU5Bd0QsRUFBSTVELE9BQVNpRCxFQUFFakYsS0FBS3lCLE1BQU0sS0FBS0MsUUFBUUMsR0FDNUJBLEVBQUVDLE9BQVMsSUFFdEJnRSxFQUFJM0QsSUFBTWdELEVBQUVqRixLQUNaNEYsRUFBSWpELFNBQVcsR0FDZmlELEVBQUkvQyxXQUFhb0MsRUFBRXBDLFdBQ2ZvQyxFQUFFWSxTQUFVLENBQ1osSUFBS1osRUFBRWEsYUFDSCxNQUFNakIsTUFBTSwrREFDaEJlLEVBQUlqRCxTQUFXc0MsRUFBRVksU0FDakJELEVBQUloRCxhQUFlcUMsRUFBRWEsYUFFckJiLEVBQUU3QyxjQUNGd0QsRUFBSXhELFlBQWM2QyxFQUFFN0MsYUFDeEJ3RCxFQUFJUCxXQUFhdkQsYUFBYWlFLGNBQWNILEVBQUk1RCxRQUNoREYsYUFBYUMsVUFBVWlFLEtBQUtKLEdBRWhDckIsdUJBQ0ksSUFBSyxNQUFNbkQsS0FBU1UsYUFBYUMsVUFDN0JYLEVBQU13QixjQUFnQnhCLEVBQU13QixnQkFJeEMxRCxFQUFRNEMsYUFBZUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBsdW1lanMvcm91dGVyL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BwbHVtZWpzL3JvdXRlci9kaXN0L3NyYy9pbnRlcm5hbFJvdXRlci5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcGx1bWVqcy9yb3V0ZXIvZGlzdC9zcmMvcm91dGVyLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBsdW1lanMvcm91dGVyL2Rpc3Qvc3JjL3JvdXRlci5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcGx1bWVqcy9yb3V0ZXIvZGlzdC9zcmMvc3RhdGljUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Sb3V0ZXIgPSB2b2lkIDA7XG5yZXF1aXJlKFwiLi9zcmMvcm91dGVyLmNvbXBvbmVudFwiKTtcbnZhciByb3V0ZXJfc2VydmljZV8xID0gcmVxdWlyZShcIi4vc3JjL3JvdXRlci5zZXJ2aWNlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUm91dGVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXJfc2VydmljZV8xLlJvdXRlcjsgfSB9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JbnRlcm5hbFJvdXRlciA9IHZvaWQgMDtcbmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG5jb25zdCBjb3JlXzEgPSByZXF1aXJlKFwiQHBsdW1lanMvY29yZVwiKTtcbmNvbnN0IHJ4anNfMSA9IHJlcXVpcmUoXCJyeGpzXCIpO1xuY29uc3Qgc3RhdGljUm91dGVyXzEgPSByZXF1aXJlKFwiLi9zdGF0aWNSb3V0ZXJcIik7XG5sZXQgSW50ZXJuYWxSb3V0ZXIgPSBjbGFzcyBJbnRlcm5hbFJvdXRlciB7XG4gICAgX2N1cnJlbnRSb3V0ZSA9IHtcbiAgICAgICAgcGF0aDogJycsXG4gICAgICAgIHBhcmFtczoge30sXG4gICAgICAgIHN0YXRlOiB7fVxuICAgIH07XG4gICAgX3RlbXBsYXRlID0gbmV3IHJ4anNfMS5TdWJqZWN0KCk7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICgwLCByeGpzXzEuZnJvbUV2ZW50KSh3aW5kb3csICdoYXNoY2hhbmdlJykuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lzdGVyT25IYXNoQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBsYXRlLmFzT2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBnZXRDdXJyZW50Um91dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50Um91dGU7XG4gICAgfVxuICAgIG5hdmlnYXRlVG8ocGF0aCA9ICcnLCBzdGF0ZSkge1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY29uc3Qgd2luZG93SGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICAgICAgaWYgKHdpbmRvd0hhc2ggPT09IHBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9uYXZpZ2F0ZVRvKHBhdGgsIHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnICsgcGF0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX25hdmlnYXRlVG8ocGF0aCwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9yZWdpc3Rlck9uSGFzaENoYW5nZSgpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICB0aGlzLl9uYXZpZ2F0ZVRvKHBhdGgsIG51bGwpO1xuICAgIH1cbiAgICBfcm91dGVNYXRjaGVyKHJvdXRlLCBwYXRoKSB7XG4gICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgY29uc3QgX21hdGNoZXIgPSBuZXcgUmVnRXhwKHJvdXRlLnJlcGxhY2UoLzpbXlxccy9dKy9nLCAnKFtcXFxcdy1dKyknKSk7XG4gICAgICAgICAgICByZXR1cm4gcGF0aC5tYXRjaChfbWF0Y2hlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcm91dGUgPT09IHBhdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX25hdmlnYXRlVG8ocGF0aCwgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgdVBhcmFtcyA9IHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoKGgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBoLmxlbmd0aCA+IDA7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByb3V0ZUFyciA9IHN0YXRpY1JvdXRlcl8xLlN0YXRpY1JvdXRlci5yb3V0ZUxpc3QuZmlsdGVyKChyb3V0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvdXRlLlBhcmFtcy5sZW5ndGggPT09IHVQYXJhbXMubGVuZ3RoICYmIHRoaXMuX3JvdXRlTWF0Y2hlcihyb3V0ZS5VcmwsIHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocm91dGUuVXJsID09PSBwYXRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgcm91dGVJdGVtID0gcm91dGVBcnIubGVuZ3RoID4gMCA/IHJvdXRlQXJyWzBdIDogbnVsbDtcbiAgICAgICAgaWYgKHJvdXRlSXRlbSkge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFJvdXRlLnBhdGggPSBwYXRoO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFJvdXRlLnN0YXRlID0geyAuLi4oc3RhdGUgfHwge30pIH07XG4gICAgICAgICAgICAoMCwgY29yZV8xLndyYXBJbnRvT2JzZXJ2YWJsZSkocm91dGVJdGVtLmNhbkFjdGl2YXRlKCkpLnN1YnNjcmliZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBfcGFyYW1zID0gc3RhdGljUm91dGVyXzEuU3RhdGljUm91dGVyLmNoZWNrUGFyYW1zKHVQYXJhbXMsIHJvdXRlSXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKF9wYXJhbXMpLmxlbmd0aCA+IDAgfHwgcGF0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50Um91dGUucGFyYW1zID0gX3BhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyb3V0ZUl0ZW0uSXNSZWdpc3RlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm91dGVJdGVtLlRlbXBsYXRlUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBjb3JlXzEud3JhcEludG9PYnNlcnZhYmxlKShyb3V0ZUl0ZW0uVGVtcGxhdGVQYXRoKCkpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlSXRlbS5Jc1JlZ2lzdGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZS5uZXh0KHJvdXRlSXRlbS5UZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZS5uZXh0KHJvdXRlSXRlbS5UZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUbyhyb3V0ZUl0ZW0ucmVkaXJlY3RUbywgc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufTtcbkludGVybmFsUm91dGVyID0gKDAsIHRzbGliXzEuX19kZWNvcmF0ZSkoW1xuICAgICgwLCBjb3JlXzEuSW5qZWN0YWJsZSkoKSxcbiAgICAoMCwgdHNsaWJfMS5fX21ldGFkYXRhKShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgSW50ZXJuYWxSb3V0ZXIpO1xuZXhwb3J0cy5JbnRlcm5hbFJvdXRlciA9IEludGVybmFsUm91dGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuY29uc3QgY29yZV8xID0gcmVxdWlyZShcIkBwbHVtZWpzL2NvcmVcIik7XG5jb25zdCByeGpzXzEgPSByZXF1aXJlKFwicnhqc1wiKTtcbmNvbnN0IGludGVybmFsUm91dGVyX3NlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2ludGVybmFsUm91dGVyLnNlcnZpY2VcIik7XG5sZXQgUm91dGVyT3V0bGV0ID0gY2xhc3MgUm91dGVyT3V0bGV0IHtcbiAgICByb3V0ZXI7XG4gICAgcmVuZGVyZXI7XG4gICAgX3RlbXBsYXRlID0gJyc7XG4gICAgX3N1YnNjcmlwdGlvbnMgPSBuZXcgcnhqc18xLlN1YnNjcmlwdGlvbigpO1xuICAgIGNvbnN0cnVjdG9yKHJvdXRlciwgcmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB9XG4gICAgYmVmb3JlTW91bnQoKSB7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMuYWRkKHRoaXMucm91dGVyLmdldFRlbXBsYXRlKCkuc3Vic2NyaWJlKCh0bXBsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IHRtcGw7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG1vdW50KCkge1xuICAgICAgICBjb25zdCBwYXRoID0gd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlVG8ocGF0aCwgbnVsbCk7XG4gICAgfVxuICAgIHVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5fdGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ0FycmF5ID0gW2Ake3RoaXMuX3RlbXBsYXRlfWBdO1xuICAgICAgICAgICAgc3RyaW5nQXJyYXkucmF3ID0gW2Ake3RoaXMuX3RlbXBsYXRlfWBdO1xuICAgICAgICAgICAgcmV0dXJuICgwLCBjb3JlXzEuaHRtbCkoc3RyaW5nQXJyYXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICgwLCBjb3JlXzEuaHRtbCkgYGA7XG4gICAgICAgIH1cbiAgICB9XG59O1xuUm91dGVyT3V0bGV0ID0gKDAsIHRzbGliXzEuX19kZWNvcmF0ZSkoW1xuICAgICgwLCBjb3JlXzEuQ29tcG9uZW50KSh7XG4gICAgICAgIHNlbGVjdG9yOiAncm91dGVyLW91dGxldCdcbiAgICB9KSxcbiAgICAoMCwgdHNsaWJfMS5fX21ldGFkYXRhKShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtpbnRlcm5hbFJvdXRlcl9zZXJ2aWNlXzEuSW50ZXJuYWxSb3V0ZXIsIGNvcmVfMS5SZW5kZXJlcl0pXG5dLCBSb3V0ZXJPdXRsZXQpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJvdXRlciA9IHZvaWQgMDtcbmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG5jb25zdCBjb3JlXzEgPSByZXF1aXJlKFwiQHBsdW1lanMvY29yZVwiKTtcbmNvbnN0IGJyb3dzZXJfb3Jfbm9kZV8xID0gcmVxdWlyZShcImJyb3dzZXItb3Itbm9kZVwiKTtcbmNvbnN0IGludGVybmFsUm91dGVyX3NlcnZpY2VfMSA9IHJlcXVpcmUoXCIuL2ludGVybmFsUm91dGVyLnNlcnZpY2VcIik7XG5jb25zdCBzdGF0aWNSb3V0ZXJfMSA9IHJlcXVpcmUoXCIuL3N0YXRpY1JvdXRlclwiKTtcbmxldCBSb3V0ZXIgPSBjbGFzcyBSb3V0ZXIge1xuICAgIGludGVybmFsUm91dGVyO1xuICAgIGNvbnN0cnVjdG9yKGludGVybmFsUm91dGVyKSB7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxSb3V0ZXIgPSBpbnRlcm5hbFJvdXRlcjtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFJvdXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFJvdXRlci5nZXRDdXJyZW50Um91dGUoKTtcbiAgICB9XG4gICAgbmF2aWdhdGVUbyhwYXRoLCBzdGF0ZSkge1xuICAgICAgICB0aGlzLmludGVybmFsUm91dGVyLm5hdmlnYXRlVG8ocGF0aCwgc3RhdGUpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXJSb3V0ZXMocm91dGVzLCBwcmVsb2FkQWxsUm91dGVzID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFicm93c2VyX29yX25vZGVfMS5pc05vZGUpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJvdXRlcykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJvdXRlIG9mIHJvdXRlcykge1xuICAgICAgICAgICAgICAgICAgICBzdGF0aWNSb3V0ZXJfMS5TdGF0aWNSb3V0ZXIuZm9ybWF0Um91dGUocm91dGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmVsb2FkQWxsUm91dGVzICYmIHN0YXRpY1JvdXRlcl8xLlN0YXRpY1JvdXRlci5wcmVsb2FkUm91dGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigncm91dGVyLmFkZFJvdXRlczogdGhlIHBhcmFtZXRlciBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuUm91dGVyID0gKDAsIHRzbGliXzEuX19kZWNvcmF0ZSkoW1xuICAgICgwLCBjb3JlXzEuSW5qZWN0YWJsZSkoKSxcbiAgICAoMCwgdHNsaWJfMS5fX21ldGFkYXRhKShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtpbnRlcm5hbFJvdXRlcl9zZXJ2aWNlXzEuSW50ZXJuYWxSb3V0ZXJdKVxuXSwgUm91dGVyKTtcbmV4cG9ydHMuUm91dGVyID0gUm91dGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlN0YXRpY1JvdXRlciA9IHZvaWQgMDtcbmNsYXNzIFN0YXRpY1JvdXRlciB7XG4gICAgc3RhdGljIHJvdXRlTGlzdCA9IFtdO1xuICAgIHN0YXRpYyBjaGVja1BhcmFtcyh1cCwgcikge1xuICAgICAgICBsZXQgcG1jID0gMDtcbiAgICAgICAgY29uc3QgcG8gPSB7fSwgcGMgPSByLlBhcmFtQ291bnQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJ0UGFyYW0gPSByLlBhcmFtc1tpXTtcbiAgICAgICAgICAgIGlmIChydFBhcmFtLmluZGV4T2YoJzonKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcG9bcnRQYXJhbS5zcGxpdCgnOicpWzFdXSA9IHVwW2ldO1xuICAgICAgICAgICAgICAgIHBtYyArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwbWMgPT09IHBjKSB7XG4gICAgICAgICAgICByZXR1cm4gcG87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0UGFyYW1Db3VudChwKSB7XG4gICAgICAgIGxldCBwYyA9IDA7XG4gICAgICAgIHAuZm9yRWFjaCgoaykgPT4ge1xuICAgICAgICAgICAgaWYgKGsuaW5kZXhPZignOicpID49IDApIHtcbiAgICAgICAgICAgICAgICBwYyArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBjO1xuICAgIH1cbiAgICBzdGF0aWMgZm9ybWF0Um91dGUocikge1xuICAgICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgICAgICBQYXJhbXM6IHt9LFxuICAgICAgICAgICAgVXJsOiAnJyxcbiAgICAgICAgICAgIFRlbXBsYXRlOiAnJyxcbiAgICAgICAgICAgIFBhcmFtQ291bnQ6IDAsXG4gICAgICAgICAgICBJc1JlZ2lzdGVyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcmVkaXJlY3RUbzogJycsXG4gICAgICAgICAgICBjYW5BY3RpdmF0ZTogKCkgPT4gdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBvYmouUGFyYW1zID0gci5wYXRoLnNwbGl0KCcvJykuZmlsdGVyKChoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaC5sZW5ndGggPiAwO1xuICAgICAgICB9KTtcbiAgICAgICAgb2JqLlVybCA9IHIucGF0aDtcbiAgICAgICAgb2JqLlRlbXBsYXRlID0gJyc7XG4gICAgICAgIG9iai5yZWRpcmVjdFRvID0gci5yZWRpcmVjdFRvO1xuICAgICAgICBpZiAoci50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgaWYgKCFyLnRlbXBsYXRlUGF0aClcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigndGVtcGxhdGVQYXRoIGlzIHJlcXVpcmVkIGluIHJvdXRlIGlmIHRlbXBsYXRlIGlzIG1lbnRpb25lZC4nKTtcbiAgICAgICAgICAgIG9iai5UZW1wbGF0ZSA9IHIudGVtcGxhdGU7XG4gICAgICAgICAgICBvYmouVGVtcGxhdGVQYXRoID0gci50ZW1wbGF0ZVBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHIuY2FuQWN0aXZhdGUpXG4gICAgICAgICAgICBvYmouY2FuQWN0aXZhdGUgPSByLmNhbkFjdGl2YXRlO1xuICAgICAgICBvYmouUGFyYW1Db3VudCA9IFN0YXRpY1JvdXRlci5nZXRQYXJhbUNvdW50KG9iai5QYXJhbXMpO1xuICAgICAgICBTdGF0aWNSb3V0ZXIucm91dGVMaXN0LnB1c2gob2JqKTtcbiAgICB9XG4gICAgc3RhdGljIHByZWxvYWRSb3V0ZXMoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgcm91dGUgb2YgU3RhdGljUm91dGVyLnJvdXRlTGlzdCkge1xuICAgICAgICAgICAgcm91dGUuVGVtcGxhdGVQYXRoICYmIHJvdXRlLlRlbXBsYXRlUGF0aCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5TdGF0aWNSb3V0ZXIgPSBTdGF0aWNSb3V0ZXI7XG4iXSwibmFtZXMiOlsiZXhwb3J0cyIsInJvdXRlcl9zZXJ2aWNlXzEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJSb3V0ZXIiLCJ2YWx1ZSIsIkludGVybmFsUm91dGVyIiwidHNsaWJfMSIsImNvcmVfMSIsInJ4anNfMSIsInN0YXRpY1JvdXRlcl8xIiwiX2N1cnJlbnRSb3V0ZSIsInBhdGgiLCJwYXJhbXMiLCJzdGF0ZSIsIl90ZW1wbGF0ZSIsIlN1YmplY3QiLCJjb25zdHJ1Y3RvciIsImZyb21FdmVudCIsIndpbmRvdyIsInN1YnNjcmliZSIsInRoaXMiLCJfcmVnaXN0ZXJPbkhhc2hDaGFuZ2UiLCJnZXRUZW1wbGF0ZSIsImFzT2JzZXJ2YWJsZSIsImdldEN1cnJlbnRSb3V0ZSIsIm5hdmlnYXRlVG8iLCJsb2NhdGlvbiIsImhhc2giLCJyZXBsYWNlIiwiX25hdmlnYXRlVG8iLCJfcm91dGVNYXRjaGVyIiwicm91dGUiLCJfbWF0Y2hlciIsIlJlZ0V4cCIsIm1hdGNoIiwidVBhcmFtcyIsInNwbGl0IiwiZmlsdGVyIiwiaCIsImxlbmd0aCIsInJvdXRlQXJyIiwiU3RhdGljUm91dGVyIiwicm91dGVMaXN0IiwiUGFyYW1zIiwiVXJsIiwicm91dGVJdGVtIiwid3JhcEludG9PYnNlcnZhYmxlIiwiY2FuQWN0aXZhdGUiLCJ2YWwiLCJfcGFyYW1zIiwiY2hlY2tQYXJhbXMiLCJrZXlzIiwiSXNSZWdpc3RlcmVkIiwibmV4dCIsIlRlbXBsYXRlIiwiVGVtcGxhdGVQYXRoIiwicmVkaXJlY3RUbyIsIl9fZGVjb3JhdGUiLCJJbmplY3RhYmxlIiwiX19tZXRhZGF0YSIsImludGVybmFsUm91dGVyX3NlcnZpY2VfMSIsIlJvdXRlck91dGxldCIsInJvdXRlciIsInJlbmRlcmVyIiwiX3N1YnNjcmlwdGlvbnMiLCJTdWJzY3JpcHRpb24iLCJiZWZvcmVNb3VudCIsImFkZCIsInRtcGwiLCJ1cGRhdGUiLCJtb3VudCIsInVubW91bnQiLCJ1bnN1YnNjcmliZSIsInJlbmRlciIsInN0cmluZ0FycmF5IiwicmF3IiwiaHRtbCIsIkNvbXBvbmVudCIsInNlbGVjdG9yIiwiUmVuZGVyZXIiLCJicm93c2VyX29yX25vZGVfMSIsImludGVybmFsUm91dGVyIiwic3RhdGljIiwicm91dGVzIiwicHJlbG9hZEFsbFJvdXRlcyIsImlzTm9kZSIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwiZm9ybWF0Um91dGUiLCJwcmVsb2FkUm91dGVzIiwidXAiLCJyIiwicG1jIiwicG8iLCJwYyIsIlBhcmFtQ291bnQiLCJpIiwicnRQYXJhbSIsImluZGV4T2YiLCJwIiwiZm9yRWFjaCIsImsiLCJvYmoiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlUGF0aCIsImdldFBhcmFtQ291bnQiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==