"use strict";(self.webpackChunkplumejs_example_repo=self.webpackChunkplumejs_example_repo||[]).push([[674],{9674:(t,e,r)=>{r.d(e,{F:()=>h});var a=r(655),s=r(6394),i=r(5720),o=r(6716),n=r(8658);class StaticRouter{static routeList=[];static checkParams(t,e){let r=0;const a={},s=e.ParamCount;for(let s=0;s<t.length;s++){const i=e.Params[s];i.indexOf(":")>=0&&(a[i.split(":")[1]]=t[s],r+=1)}return r===s?a:{}}static getParamCount(t){let e=0;return t.forEach((t=>{t.indexOf(":")>=0&&(e+=1)})),e}static formatRoute(t){const e={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(e.Params=t.path.split("/").filter((t=>t.length>0)),e.Url=t.path,e.Template="",e.redirectTo=t.redirectTo,t.template){if(!t.templatePath)throw Error("templatePath is required in route if template is mentioned.");e.Template=t.template,e.TemplatePath=t.templatePath}t.canActivate&&(e.canActivate=t.canActivate),e.ParamCount=StaticRouter.getParamCount(e.Params),StaticRouter.routeList.push(e)}static preloadRoutes(){for(const t of StaticRouter.routeList)t.TemplatePath&&t.TemplatePath()}}let u=class InternalRouter{_currentRoute={path:"",params:{},state:{}};_template=new o.x;constructor(){(0,n.R)(window,"hashchange").subscribe((()=>{this._registerOnHashChange()}))}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute}navigateTo(t="",e){if(t){window.location.hash.replace(/^#/,"")===t&&this._navigateTo(t,e),window.location.hash="#"+t}else this._navigateTo(t,e)}_registerOnHashChange(){const t=window.location.hash.replace(/^#/,"");this._navigateTo(t,null)}_routeMatcher(t,e){if(t){const r=new RegExp(t.replace(/:[^\s/]+/g,"([\\w-]+)"));return e.match(r)}return t===e}_navigateTo(t,e){const r=t.split("/").filter((t=>t.length>0)),a=StaticRouter.routeList.filter((e=>e.Params.length===r.length&&this._routeMatcher(e.Url,t)||e.Url===t?e:void 0)),i=a.length>0?a[0]:null;i&&(this._currentRoute.path=t,this._currentRoute.state={...e||{}},(0,s.lN)(i.canActivate()).subscribe((a=>{if(!a)return;const o=StaticRouter.checkParams(r,i);Object.keys(o).length>0||t?(this._currentRoute.params=o,i.IsRegistered?this._template.next(i.Template):i.TemplatePath&&(0,s.lN)(i.TemplatePath()).subscribe((()=>{i.IsRegistered=!0,this._template.next(i.Template)}))):this.navigateTo(i.redirectTo,e)})))}};u=(0,a.gn)([(0,s.GS)(),(0,a.w6)("design:paramtypes",[])],u);let l=class RouterOutlet{router;renderer;_template="";_subscriptions=new i.w0;constructor(t,e){this.router=t,this.renderer=e}beforeMount(){this._subscriptions.add(this.router.getTemplate().subscribe((t=>{this._template=t,this.renderer.update()})))}mount(){const t=window.location.hash.replace(/^#/,"");this.router.navigateTo(t,null)}unmount(){this._subscriptions.unsubscribe()}render(){if(this._template){const t=[`${this._template}`];return t.raw=[`${this._template}`],(0,s.dy)(t)}return s.dy``}};l=(0,a.gn)([(0,s.wA)({selector:"router-outlet"}),(0,a.w6)("design:paramtypes",[u,s.Th])],l);var c=r(3818);let h=class Router{internalRouter;constructor(t){this.internalRouter=t}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(t,e){this.internalRouter.navigateTo(t,e)}static registerRoutes(t,e=!1){if(!c.UG){if(!Array.isArray(t))throw Error("router.addRoutes: the parameter must be an array");for(const e of t)StaticRouter.formatRoute(e);e&&StaticRouter.preloadRoutes()}}};h=(0,a.gn)([(0,s.GS)(),(0,a.w6)("design:paramtypes",[u])],h)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0cy82NzQuZGMzZjQyNjNiYTI4Y2E1ZmE1ZTguYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJpTUFBTyxNQUFNQSxhQUNUQyxpQkFBbUIsR0FDbkJBLG1CQUFtQkMsRUFBSUMsR0FDbkIsSUFBSUMsRUFBTSxFQUNWLE1BQU1DLEVBQUssR0FBSUMsRUFBS0gsRUFBRUksV0FDdEIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlOLEVBQUdPLE9BQVFELElBQUssQ0FDaEMsTUFBTUUsRUFBVVAsRUFBRVEsT0FBT0gsR0FDckJFLEVBQVFFLFFBQVEsTUFBUSxJQUN4QlAsRUFBR0ssRUFBUUcsTUFBTSxLQUFLLElBQU1YLEVBQUdNLEdBQy9CSixHQUFPLEdBR2YsT0FBSUEsSUFBUUUsRUFDREQsRUFFSixHQUVYSixxQkFBcUJhLEdBQ2pCLElBQUlSLEVBQUssRUFNVCxPQUxBUSxFQUFFQyxTQUFTQyxJQUNIQSxFQUFFSixRQUFRLE1BQVEsSUFDbEJOLEdBQU0sTUFHUEEsRUFFWEwsbUJBQW1CRSxHQUNmLE1BQU1jLEVBQU0sQ0FDUk4sT0FBUSxHQUNSTyxJQUFLLEdBQ0xDLFNBQVUsR0FDVlosV0FBWSxFQUNaYSxjQUFjLEVBQ2RDLFdBQVksR0FDWkMsWUFBYSxLQUFNLEdBUXZCLEdBTkFMLEVBQUlOLE9BQVNSLEVBQUVvQixLQUFLVixNQUFNLEtBQUtXLFFBQVFDLEdBQzVCQSxFQUFFaEIsT0FBUyxJQUV0QlEsRUFBSUMsSUFBTWYsRUFBRW9CLEtBQ1pOLEVBQUlFLFNBQVcsR0FDZkYsRUFBSUksV0FBYWxCLEVBQUVrQixXQUNmbEIsRUFBRXVCLFNBQVUsQ0FDWixJQUFLdkIsRUFBRXdCLGFBQ0gsTUFBTUMsTUFBTSwrREFDaEJYLEVBQUlFLFNBQVdoQixFQUFFdUIsU0FDakJULEVBQUlZLGFBQWUxQixFQUFFd0IsYUFFckJ4QixFQUFFbUIsY0FDRkwsRUFBSUssWUFBY25CLEVBQUVtQixhQUN4QkwsRUFBSVYsV0FBYVAsYUFBYThCLGNBQWNiLEVBQUlOLFFBQ2hE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RTdCLE9BREEwQyxFQUFZQyxJQUFNLENBQUMsR0FBR3JDLEtBQUtOLGNBQ3BCLFFBQUswQyxHQUdaLE9BQU8sSUFBSyxLQUl4QmIsR0FBZSxRQUFXLEVBQ3RCLFFBQVUsQ0FDTmUsU0FBVSxtQkFFZCxRQUFXLG9CQUFxQixDQUFDaEQsRUFBZ0IsUUFDbERpQyxHLGNDckNILElBQUlnQixFQUFTLE1BQU1BLE9BQ2ZDLGVBQ0E1QyxZQUFZNEMsR0FDUnhDLEtBQUt3QyxlQUFpQkEsRUFFMUJwQyxrQkFDSSxPQUFPSixLQUFLd0MsZUFBZXBDLGtCQUUvQkMsV0FBVzFCLEVBQU1jLEdBQ2JPLEtBQUt3QyxlQUFlbkMsV0FBVzFCLEVBQU1jLEdBRXpDcEMsc0JBQXNCb0YsRUFBUUMsR0FBbUIsR0FDN0MsSUFBSyxLQUFRLENBQ1QsSUFBSUMsTUFBTUMsUUFBUUgsR0FPZCxNQUFNekQsTUFBTSxvREFOWixJQUFLLE1BQU1LLEtBQVNvRCxFQUNoQnJGLGFBQWF5RixZQUFZeEQsR0FFN0JxRCxHQUFvQnRGLGFBQWEwRixtQkFRakRQLEdBQVMsUUFBVyxFQUNoQixXQUNBLFFBQVcsb0JBQXFCLENBQUNqRCxLQUNsQ2lEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BwbHVtZWpzL3JvdXRlci9kaXN0L21qcy9zcmMvc3RhdGljUm91dGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcGx1bWVqcy9yb3V0ZXIvZGlzdC9tanMvc3JjL2ludGVybmFsUm91dGVyLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BwbHVtZWpzL3JvdXRlci9kaXN0L21qcy9zcmMvcm91dGVyLmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBsdW1lanMvcm91dGVyL2Rpc3QvbWpzL3NyYy9yb3V0ZXIuc2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgU3RhdGljUm91dGVyIHtcbiAgICBzdGF0aWMgcm91dGVMaXN0ID0gW107XG4gICAgc3RhdGljIGNoZWNrUGFyYW1zKHVwLCByKSB7XG4gICAgICAgIGxldCBwbWMgPSAwO1xuICAgICAgICBjb25zdCBwbyA9IHt9LCBwYyA9IHIuUGFyYW1Db3VudDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcnRQYXJhbSA9IHIuUGFyYW1zW2ldO1xuICAgICAgICAgICAgaWYgKHJ0UGFyYW0uaW5kZXhPZignOicpID49IDApIHtcbiAgICAgICAgICAgICAgICBwb1tydFBhcmFtLnNwbGl0KCc6JylbMV1dID0gdXBbaV07XG4gICAgICAgICAgICAgICAgcG1jICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBtYyA9PT0gcGMpIHtcbiAgICAgICAgICAgIHJldHVybiBwbztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHN0YXRpYyBnZXRQYXJhbUNvdW50KHApIHtcbiAgICAgICAgbGV0IHBjID0gMDtcbiAgICAgICAgcC5mb3JFYWNoKChrKSA9PiB7XG4gICAgICAgICAgICBpZiAoay5pbmRleE9mKCc6JykgPj0gMCkge1xuICAgICAgICAgICAgICAgIHBjICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGM7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JtYXRSb3V0ZShyKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHtcbiAgICAgICAgICAgIFBhcmFtczoge30sXG4gICAgICAgICAgICBVcmw6ICcnLFxuICAgICAgICAgICAgVGVtcGxhdGU6ICcnLFxuICAgICAgICAgICAgUGFyYW1Db3VudDogMCxcbiAgICAgICAgICAgIElzUmVnaXN0ZXJlZDogZmFsc2UsXG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnJyxcbiAgICAgICAgICAgIGNhbkFjdGl2YXRlOiAoKSA9PiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIG9iai5QYXJhbXMgPSByLnBhdGguc3BsaXQoJy8nKS5maWx0ZXIoKGgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBoLmxlbmd0aCA+IDA7XG4gICAgICAgIH0pO1xuICAgICAgICBvYmouVXJsID0gci5wYXRoO1xuICAgICAgICBvYmouVGVtcGxhdGUgPSAnJztcbiAgICAgICAgb2JqLnJlZGlyZWN0VG8gPSByLnJlZGlyZWN0VG87XG4gICAgICAgIGlmIChyLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICBpZiAoIXIudGVtcGxhdGVQYXRoKVxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCd0ZW1wbGF0ZVBhdGggaXMgcmVxdWlyZWQgaW4gcm91dGUgaWYgdGVtcGxhdGUgaXMgbWVudGlvbmVkLicpO1xuICAgICAgICAgICAgb2JqLlRlbXBsYXRlID0gci50ZW1wbGF0ZTtcbiAgICAgICAgICAgIG9iai5UZW1wbGF0ZVBhdGggPSByLnRlbXBsYXRlUGF0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoci5jYW5BY3RpdmF0ZSlcbiAgICAgICAgICAgIG9iai5jYW5BY3RpdmF0ZSA9IHIuY2FuQWN0aXZhdGU7XG4gICAgICAgIG9iai5QYXJhbUNvdW50ID0gU3RhdGljUm91dGVyLmdldFBhcmFtQ291bnQob2JqLlBhcmFtcyk7XG4gICAgICAgIFN0YXRpY1JvdXRlci5yb3V0ZUxpc3QucHVzaChvYmopO1xuICAgIH1cbiAgICBzdGF0aWMgcHJlbG9hZFJvdXRlcygpIHtcbiAgICAgICAgZm9yIChjb25zdCByb3V0ZSBvZiBTdGF0aWNSb3V0ZXIucm91dGVMaXN0KSB7XG4gICAgICAgICAgICByb3V0ZS5UZW1wbGF0ZVBhdGggJiYgcm91dGUuVGVtcGxhdGVQYXRoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJbmplY3RhYmxlLCB3cmFwSW50b09ic2VydmFibGUgfSBmcm9tICdAcGx1bWVqcy9jb3JlJztcbmltcG9ydCB7IGZyb21FdmVudCwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgU3RhdGljUm91dGVyIH0gZnJvbSAnLi9zdGF0aWNSb3V0ZXInO1xubGV0IEludGVybmFsUm91dGVyID0gY2xhc3MgSW50ZXJuYWxSb3V0ZXIge1xuICAgIF9jdXJyZW50Um91dGUgPSB7XG4gICAgICAgIHBhdGg6ICcnLFxuICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICBzdGF0ZToge31cbiAgICB9O1xuICAgIF90ZW1wbGF0ZSA9IG5ldyBTdWJqZWN0KCk7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGZyb21FdmVudCh3aW5kb3csICdoYXNoY2hhbmdlJykuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lzdGVyT25IYXNoQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBsYXRlLmFzT2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBnZXRDdXJyZW50Um91dGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50Um91dGU7XG4gICAgfVxuICAgIG5hdmlnYXRlVG8ocGF0aCA9ICcnLCBzdGF0ZSkge1xuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY29uc3Qgd2luZG93SGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICAgICAgaWYgKHdpbmRvd0hhc2ggPT09IHBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9uYXZpZ2F0ZVRvKHBhdGgsIHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnICsgcGF0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX25hdmlnYXRlVG8ocGF0aCwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9yZWdpc3Rlck9uSGFzaENoYW5nZSgpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICB0aGlzLl9uYXZpZ2F0ZVRvKHBhdGgsIG51bGwpO1xuICAgIH1cbiAgICBfcm91dGVNYXRjaGVyKHJvdXRlLCBwYXRoKSB7XG4gICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgY29uc3QgX21hdGNoZXIgPSBuZXcgUmVnRXhwKHJvdXRlLnJlcGxhY2UoLzpbXlxccy9dKy9nLCAnKFtcXFxcdy1dKyknKSk7XG4gICAgICAgICAgICByZXR1cm4gcGF0aC5tYXRjaChfbWF0Y2hlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcm91dGUgPT09IHBhdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX25hdmlnYXRlVG8ocGF0aCwgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgdVBhcmFtcyA9IHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoKGgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBoLmxlbmd0aCA+IDA7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByb3V0ZUFyciA9IFN0YXRpY1JvdXRlci5yb3V0ZUxpc3QuZmlsdGVyKChyb3V0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvdXRlLlBhcmFtcy5sZW5ndGggPT09IHVQYXJhbXMubGVuZ3RoICYmIHRoaXMuX3JvdXRlTWF0Y2hlcihyb3V0ZS5VcmwsIHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocm91dGUuVXJsID09PSBwYXRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgcm91dGVJdGVtID0gcm91dGVBcnIubGVuZ3RoID4gMCA/IHJvdXRlQXJyWzBdIDogbnVsbDtcbiAgICAgICAgaWYgKHJvdXRlSXRlbSkge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFJvdXRlLnBhdGggPSBwYXRoO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFJvdXRlLnN0YXRlID0geyAuLi4oc3RhdGUgfHwge30pIH07XG4gICAgICAgICAgICB3cmFwSW50b09ic2VydmFibGUocm91dGVJdGVtLmNhbkFjdGl2YXRlKCkpLnN1YnNjcmliZSgodmFsKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBfcGFyYW1zID0gU3RhdGljUm91dGVyLmNoZWNrUGFyYW1zKHVQYXJhbXMsIHJvdXRlSXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKF9wYXJhbXMpLmxlbmd0aCA+IDAgfHwgcGF0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50Um91dGUucGFyYW1zID0gX3BhcmFtcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyb3V0ZUl0ZW0uSXNSZWdpc3RlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm91dGVJdGVtLlRlbXBsYXRlUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBJbnRvT2JzZXJ2YWJsZShyb3V0ZUl0ZW0uVGVtcGxhdGVQYXRoKCkpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlSXRlbS5Jc1JlZ2lzdGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZS5uZXh0KHJvdXRlSXRlbS5UZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZS5uZXh0KHJvdXRlSXRlbS5UZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUbyhyb3V0ZUl0ZW0ucmVkaXJlY3RUbywgc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufTtcbkludGVybmFsUm91dGVyID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEludGVybmFsUm91dGVyKTtcbmV4cG9ydCB7IEludGVybmFsUm91dGVyIH07XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIGh0bWwsIFJlbmRlcmVyIH0gZnJvbSAnQHBsdW1lanMvY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEludGVybmFsUm91dGVyIH0gZnJvbSAnLi9pbnRlcm5hbFJvdXRlci5zZXJ2aWNlJztcbmxldCBSb3V0ZXJPdXRsZXQgPSBjbGFzcyBSb3V0ZXJPdXRsZXQge1xuICAgIHJvdXRlcjtcbiAgICByZW5kZXJlcjtcbiAgICBfdGVtcGxhdGUgPSAnJztcbiAgICBfc3Vic2NyaXB0aW9ucyA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICBjb25zdHJ1Y3Rvcihyb3V0ZXIsIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgfVxuICAgIGJlZm9yZU1vdW50KCkge1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJvdXRlci5nZXRUZW1wbGF0ZSgpLnN1YnNjcmliZSgodG1wbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSB0bXBsO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBtb3VudCgpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZVRvKHBhdGgsIG51bGwpO1xuICAgIH1cbiAgICB1bm1vdW50KCkge1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RlbXBsYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdBcnJheSA9IFtgJHt0aGlzLl90ZW1wbGF0ZX1gXTtcbiAgICAgICAgICAgIHN0cmluZ0FycmF5LnJhdyA9IFtgJHt0aGlzLl90ZW1wbGF0ZX1gXTtcbiAgICAgICAgICAgIHJldHVybiBodG1sKHN0cmluZ0FycmF5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBodG1sIGBgO1xuICAgICAgICB9XG4gICAgfVxufTtcblJvdXRlck91dGxldCA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHNlbGVjdG9yOiAncm91dGVyLW91dGxldCdcbiAgICB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0ludGVybmFsUm91dGVyLCBSZW5kZXJlcl0pXG5dLCBSb3V0ZXJPdXRsZXQpO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0BwbHVtZWpzL2NvcmUnO1xuaW1wb3J0IHsgaXNOb2RlIH0gZnJvbSAnYnJvd3Nlci1vci1ub2RlJztcbmltcG9ydCB7IEludGVybmFsUm91dGVyIH0gZnJvbSAnLi9pbnRlcm5hbFJvdXRlci5zZXJ2aWNlJztcbmltcG9ydCB7IFN0YXRpY1JvdXRlciB9IGZyb20gJy4vc3RhdGljUm91dGVyJztcbmxldCBSb3V0ZXIgPSBjbGFzcyBSb3V0ZXIge1xuICAgIGludGVybmFsUm91dGVyO1xuICAgIGNvbnN0cnVjdG9yKGludGVybmFsUm91dGVyKSB7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxSb3V0ZXIgPSBpbnRlcm5hbFJvdXRlcjtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFJvdXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFJvdXRlci5nZXRDdXJyZW50Um91dGUoKTtcbiAgICB9XG4gICAgbmF2aWdhdGVUbyhwYXRoLCBzdGF0ZSkge1xuICAgICAgICB0aGlzLmludGVybmFsUm91dGVyLm5hdmlnYXRlVG8ocGF0aCwgc3RhdGUpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXJSb3V0ZXMocm91dGVzLCBwcmVsb2FkQWxsUm91dGVzID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFpc05vZGUpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJvdXRlcykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJvdXRlIG9mIHJvdXRlcykge1xuICAgICAgICAgICAgICAgICAgICBTdGF0aWNSb3V0ZXIuZm9ybWF0Um91dGUocm91dGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmVsb2FkQWxsUm91dGVzICYmIFN0YXRpY1JvdXRlci5wcmVsb2FkUm91dGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigncm91dGVyLmFkZFJvdXRlczogdGhlIHBhcmFtZXRlciBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuUm91dGVyID0gX19kZWNvcmF0ZShbXG4gICAgSW5qZWN0YWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbSW50ZXJuYWxSb3V0ZXJdKVxuXSwgUm91dGVyKTtcbmV4cG9ydCB7IFJvdXRlciB9O1xuIl0sIm5hbWVzIjpbIlN0YXRpY1JvdXRlciIsInN0YXRpYyIsInVwIiwiciIsInBtYyIsInBvIiwicGMiLCJQYXJhbUNvdW50IiwiaSIsImxlbmd0aCIsInJ0UGFyYW0iLCJQYXJhbXMiLCJpbmRleE9mIiwic3BsaXQiLCJwIiwiZm9yRWFjaCIsImsiLCJvYmoiLCJVcmwiLCJUZW1wbGF0ZSIsIklzUmVnaXN0ZXJlZCIsInJlZGlyZWN0VG8iLCJjYW5BY3RpdmF0ZSIsInBhdGgiLCJmaWx0ZXIiLCJoIiwidGVtcGxhdGUiLCJ0ZW1wbGF0ZVBhdGgiLCJFcnJvciIsIlRlbXBsYXRlUGF0aCIsImdldFBhcmFtQ291bnQiLCJyb3V0ZUxpc3QiLCJwdXNoIiwicm91dGUiLCJJbnRlcm5hbFJvdXRlciIsIl9jdXJyZW50Um91dGUiLCJwYXJhbXMiLCJzdGF0ZSIsIl90ZW1wbGF0ZSIsIlN1YmplY3QiLCJjb25zdHJ1Y3RvciIsImZyb21FdmVudCIsIndpbmRvdyIsInN1YnNjcmliZSIsInRoaXMiLCJfcmVnaXN0ZXJPbkhhc2hDaGFuZ2UiLCJnZXRUZW1wbGF0ZSIsImFzT2JzZXJ2YWJsZSIsImdldEN1cnJlbnRSb3V0ZSIsIm5hdmlnYXRlVG8iLCJsb2NhdGlvbiIsImhhc2giLCJyZXBsYWNlIiwiX25hdmlnYXRlVG8iLCJfcm91dGVNYXRjaGVyIiwiX21hdGNoZXIiLCJSZWdFeHAiLCJtYXRjaCIsInVQYXJhbXMiLCJyb3V0ZUFyciIsInJvdXRlSXRlbSIsInZhbCIsIl9wYXJhbXMiLCJjaGVja1BhcmFtcyIsIk9iamVjdCIsImtleXMiLCJuZXh0IiwiUm91dGVyT3V0bGV0Iiwicm91dGVyIiwicmVuZGVyZXIiLCJfc3Vic2NyaXB0aW9ucyIsIlN1YnNjcmlwdGlvbiIsImJlZm9yZU1vdW50IiwiYWRkIiwidG1wbCIsInVwZGF0ZSIsIm1vdW50IiwidW5tb3VudCIsInVuc3Vic2NyaWJlIiwicmVuZGVyIiwic3RyaW5nQXJyYXkiLCJyYXciLCJzZWxlY3RvciIsIlJvdXRlciIsImludGVybmFsUm91dGVyIiwicm91dGVzIiwicHJlbG9hZEFsbFJvdXRlcyIsIkFycmF5IiwiaXNBcnJheSIsImZvcm1hdFJvdXRlIiwicHJlbG9hZFJvdXRlcyJdLCJzb3VyY2VSb290IjoiIn0=