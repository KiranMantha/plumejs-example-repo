"use strict";(self.webpackChunkplumejs_example_repo=self.webpackChunkplumejs_example_repo||[]).push([[602],{1602:(e,t,r)=>{t.F=void 0,r(346);var a=r(9282);Object.defineProperty(t,"F",{enumerable:!0,get:function(){return a.Router}})},1346:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InternalRouter=void 0;const a=r(655),s=r(8522),n=r(8698),o=r(4035);let i=class{_currentRoute={path:"",params:{},state:{}};_template=new n.Subject;constructor(){(0,n.fromEvent)(window,"hashchange").subscribe((()=>{this._registerOnHashChange()}))}getTemplate(){return this._template.asObservable()}getCurrentRoute(){return this._currentRoute}navigateTo(e="",t){if(e){window.location.hash.replace(/^#/,"")===e&&this._navigateTo(e,t),window.location.hash="#"+e}else this._navigateTo(e,t)}_registerOnHashChange(){const e=window.location.hash.replace(/^#/,"");this._navigateTo(e,null)}_routeMatcher(e,t){if(e){const r=new RegExp(e.replace(/:[^\s/]+/g,"([\\w-]+)"));return t.match(r)}return e===t}_navigateTo(e,t){const r=e.split("/").filter((e=>e.length>0)),a=o.StaticRouter.routList.filter((t=>t.Params.length===r.length&&this._routeMatcher(t.Url,e)||t.Url===e?t:void 0)),n=a.length>0?a[0]:null;n&&(this._currentRoute.path=e,this._currentRoute.state={...t||{}},(0,s.wrapIntoObservable)(n.canActivate()).subscribe((a=>{if(!a)return;const i=o.StaticRouter.checkParams(r,n);Object.keys(i).length>0||e?(this._currentRoute.params=i,n.IsRegistered?this._template.next(n.Template):n.TemplatePath&&(0,s.wrapIntoObservable)(n.TemplatePath()).subscribe((()=>{n.IsRegistered=!0,this._template.next(n.Template)}))):this.navigateTo(n.redirectTo,t)})))}};i=(0,a.__decorate)([(0,s.Injectable)(),(0,a.__metadata)("design:paramtypes",[])],i),t.InternalRouter=i},346:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=r(655),s=r(8522),n=r(8698),o=r(1346);let i=class{router;renderer;_template="";_subscriptions=new n.Subscription;constructor(e,t){this.router=e,this.renderer=t}beforeMount(){this._subscriptions.add(this.router.getTemplate().subscribe((e=>{this._template=e,this.renderer.update()})))}mount(){const e=window.location.hash.replace(/^#/,"");this.router.navigateTo(e,null)}unmount(){this._subscriptions.unsubscribe()}render(){if(this._template){const e=[`${this._template}`];return e.raw=[`${this._template}`],(0,s.html)(e)}return s.html``}};i=(0,a.__decorate)([(0,s.Component)({selector:"router-outlet"}),(0,a.__metadata)("design:paramtypes",[o.InternalRouter,s.Renderer])],i)},9282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;const a=r(655),s=r(8522),n=r(3818),o=r(1346),i=r(4035);let u=class{internalRouter;constructor(e){this.internalRouter=e}getCurrentRoute(){return this.internalRouter.getCurrentRoute()}navigateTo(e,t){this.internalRouter.navigateTo(e,t)}static registerRoutes(e){if(!n.isNode){if(!Array.isArray(e))throw Error("router.addRoutes: the parameter must be an array");for(const t of e)i.StaticRouter.formatRoute(t)}}};u=(0,a.__decorate)([(0,s.Injectable)(),(0,a.__metadata)("design:paramtypes",[o.InternalRouter])],u),t.Router=u},4035:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StaticRouter=void 0;class r{static routList=[];static checkParams(e,t){let r=0;const a={},s=t.ParamCount;for(let s=0;s<e.length;s++){const n=t.Params[s];n.indexOf(":")>=0&&(a[n.split(":")[1]]=e[s],r+=1)}return r===s?a:{}}static getParamCount(e){let t=0;return e.forEach((e=>{e.indexOf(":")>=0&&(t+=1)})),t}static formatRoute(e){const t={Params:{},Url:"",Template:"",ParamCount:0,IsRegistered:!1,redirectTo:"",canActivate:()=>!0};if(t.Params=e.path.split("/").filter((e=>e.length>0)),t.Url=e.path,t.Template="",t.redirectTo=e.redirectTo,e.template){if(!e.templatePath)throw Error("templatePath is required in route if template is mentioned.");t.Template=e.template,t.TemplatePath=e.templatePath}e.canActivate&&(t.canActivate=e.canActivate),t.ParamCount=r.getParamCount(t.Params),r.routList.push(t)}}t.StaticRouter=r}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0cy82MDIuZWQyMDgyMGI5ZTQ5YjZjNzA4MTUuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiIySEFFQUEsRUFBUSxPQUFTLEVBQ2pCLEVBQVEsS0FDUixJQUFJQyxFQUFtQixFQUFRLE1BQy9CQyxPQUFPQyxlQUFlSCxFQUFTLElBQS9CLENBQTJDSSxZQUFZLEVBQU1DLElBQUssV0FBYyxPQUFPSixFQUFpQkssVyxlQ0p4R0osT0FBT0MsZUFBZUgsRUFBUyxhQUFjLENBQUVPLE9BQU8sSUFDdERQLEVBQVFRLG9CQUFpQixFQUN6QixNQUFNQyxFQUFVLEVBQVEsS0FDbEJDLEVBQVMsRUFBUSxNQUNqQkMsRUFBUyxFQUFRLE1BQ2pCQyxFQUFpQixFQUFRLE1BQy9CLElBQUlKLEVBQWlCLE1BQ2pCSyxjQUFnQixDQUNaQyxLQUFNLEdBQ05DLE9BQVEsR0FDUkMsTUFBTyxJQUVYQyxVQUFZLElBQUlOLEVBQU9PLFFBQ3ZCQyxlQUNJLEVBQUlSLEVBQU9TLFdBQVdDLE9BQVEsY0FBY0MsV0FBVSxLQUNsREMsS0FBS0MsMkJBR2JDLGNBQ0ksT0FBT0YsS0FBS04sVUFBVVMsZUFFMUJDLGtCQUNJLE9BQU9KLEtBQUtWLGNBRWhCZSxXQUFXZCxFQUFPLEdBQUlFLEdBQ2xCLEdBQUlGLEVBQU0sQ0FDYU8sT0FBT1EsU0FBU0MsS0FBS0MsUUFBUSxLQUFNLE1BQ25DakIsR0FDZlMsS0FBS1MsWUFBWWxCLEVBQU1FLEdBRTNCSyxPQUFPUSxTQUFTQyxLQUFPLElBQU1oQixPQUc3QlMsS0FBS1MsWUFBWWxCLEVBQU1FLEdBRy9CUSx3QkFDSSxNQUFNVixFQUFPTyxPQUFPUSxTQUFTQyxLQUFLQyxRQUFRLEtBQU0sSUFDaERSLEtBQUtTLFlBQVlsQixFQUFNLE1BRTNCbUIsY0FBY0MsRUFBT3BCLEdBQ2pCLEdBQUlvQixFQUFPLENBQ1AsTUFBTUMsRUFBVyxJQUFJQyxPQUFPRixFQUFNSCxRQUFRLFlBQWEsY0FDdkQsT0FBT2pCLEVBQUt1QixNQUFNRixHQUdsQixPQUFPRCxJ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QUFTK0MsRUFBRS9FLEtBQUt5QixNQUFNLEtBQUtDLFFBQVFDLEdBQzVCQSxFQUFFQyxPQUFTLElBRXRCOEQsRUFBSXpELElBQU04QyxFQUFFL0UsS0FDWjBGLEVBQUkvQyxTQUFXLEdBQ2YrQyxFQUFJN0MsV0FBYWtDLEVBQUVsQyxXQUNma0MsRUFBRVksU0FBVSxDQUNaLElBQUtaLEVBQUVhLGFBQ0gsTUFBTWhCLE1BQU0sK0RBQ2hCYyxFQUFJL0MsU0FBV29DLEVBQUVZLFNBQ2pCRCxFQUFJOUMsYUFBZW1DLEVBQUVhLGFBRXJCYixFQUFFM0MsY0FDRnNELEVBQUl0RCxZQUFjMkMsRUFBRTNDLGFBQ3hCc0QsRUFBSVAsV0FBYXJELEVBQWErRCxjQUFjSCxFQUFJMUQsUUFDaERGLEVBQWFDLFNBQVMrRCxLQUFLSixJQUduQ3hHLEVBQVE0QyxhQUFlQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcGx1bWVqcy9yb3V0ZXIvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHBsdW1lanMvcm91dGVyL2Rpc3Qvc3JjL2ludGVybmFsUm91dGVyLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BwbHVtZWpzL3JvdXRlci9kaXN0L3NyYy9yb3V0ZXIuY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AcGx1bWVqcy9yb3V0ZXIvZGlzdC9zcmMvcm91dGVyLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BwbHVtZWpzL3JvdXRlci9kaXN0L3NyYy9zdGF0aWNSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJvdXRlciA9IHZvaWQgMDtcbnJlcXVpcmUoXCIuL3NyYy9yb3V0ZXIuY29tcG9uZW50XCIpO1xudmFyIHJvdXRlcl9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9zcmMvcm91dGVyLnNlcnZpY2VcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJSb3V0ZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlcl9zZXJ2aWNlXzEuUm91dGVyOyB9IH0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkludGVybmFsUm91dGVyID0gdm9pZCAwO1xuY29uc3QgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbmNvbnN0IGNvcmVfMSA9IHJlcXVpcmUoXCJAcGx1bWVqcy9jb3JlXCIpO1xuY29uc3Qgcnhqc18xID0gcmVxdWlyZShcInJ4anNcIik7XG5jb25zdCBzdGF0aWNSb3V0ZXJfMSA9IHJlcXVpcmUoXCIuL3N0YXRpY1JvdXRlclwiKTtcbmxldCBJbnRlcm5hbFJvdXRlciA9IGNsYXNzIEludGVybmFsUm91dGVyIHtcbiAgICBfY3VycmVudFJvdXRlID0ge1xuICAgICAgICBwYXRoOiAnJyxcbiAgICAgICAgcGFyYW1zOiB7fSxcbiAgICAgICAgc3RhdGU6IHt9XG4gICAgfTtcbiAgICBfdGVtcGxhdGUgPSBuZXcgcnhqc18xLlN1YmplY3QoKTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgKDAsIHJ4anNfMS5mcm9tRXZlbnQpKHdpbmRvdywgJ2hhc2hjaGFuZ2UnKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJPbkhhc2hDaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcGxhdGUuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIGdldEN1cnJlbnRSb3V0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRSb3V0ZTtcbiAgICB9XG4gICAgbmF2aWdhdGVUbyhwYXRoID0gJycsIHN0YXRlKSB7XG4gICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICBjb25zdCB3aW5kb3dIYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgICAgICAgICBpZiAod2luZG93SGFzaCA9PT0gcGF0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX25hdmlnYXRlVG8ocGF0aCwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIycgKyBwYXRoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbmF2aWdhdGVUbyhwYXRoLCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3JlZ2lzdGVyT25IYXNoQ2hhbmdlKCkge1xuICAgICAgICBjb25zdCBwYXRoID0gd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgICAgIHRoaXMuX25hdmlnYXRlVG8ocGF0aCwgbnVsbCk7XG4gICAgfVxuICAgIF9yb3V0ZU1hdGNoZXIocm91dGUsIHBhdGgpIHtcbiAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICBjb25zdCBfbWF0Y2hlciA9IG5ldyBSZWdFeHAocm91dGUucmVwbGFjZSgvOlteXFxzL10rL2csICcoW1xcXFx3LV0rKScpKTtcbiAgICAgICAgICAgIHJldHVybiBwYXRoLm1hdGNoKF9tYXRjaGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZSA9PT0gcGF0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfbmF2aWdhdGVUbyhwYXRoLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCB1UGFyYW1zID0gcGF0aC5zcGxpdCgnLycpLmZpbHRlcigoaCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGgubGVuZ3RoID4gMDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJvdXRlQXJyID0gc3RhdGljUm91dGVyXzEuU3RhdGljUm91dGVyLnJvdXRMaXN0LmZpbHRlcigocm91dGUpID0+IHtcbiAgICAgICAgICAgIGlmIChyb3V0ZS5QYXJhbXMubGVuZ3RoID09PSB1UGFyYW1zLmxlbmd0aCAmJiB0aGlzLl9yb3V0ZU1hdGNoZXIocm91dGUuVXJsLCBwYXRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJvdXRlLlVybCA9PT0gcGF0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJvdXRlSXRlbSA9IHJvdXRlQXJyLmxlbmd0aCA+IDAgPyByb3V0ZUFyclswXSA6IG51bGw7XG4gICAgICAgIGlmIChyb3V0ZUl0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRSb3V0ZS5wYXRoID0gcGF0aDtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRSb3V0ZS5zdGF0ZSA9IHsgLi4uKHN0YXRlIHx8IHt9KSB9O1xuICAgICAgICAgICAgKDAsIGNvcmVfMS53cmFwSW50b09ic2VydmFibGUpKHJvdXRlSXRlbS5jYW5BY3RpdmF0ZSgpKS5zdWJzY3JpYmUoKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdmFsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgX3BhcmFtcyA9IHN0YXRpY1JvdXRlcl8xLlN0YXRpY1JvdXRlci5jaGVja1BhcmFtcyh1UGFyYW1zLCByb3V0ZUl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhfcGFyYW1zKS5sZW5ndGggPiAwIHx8IHBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFJvdXRlLnBhcmFtcyA9IF9wYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcm91dGVJdGVtLklzUmVnaXN0ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdXRlSXRlbS5UZW1wbGF0ZVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgY29yZV8xLndyYXBJbnRvT2JzZXJ2YWJsZSkocm91dGVJdGVtLlRlbXBsYXRlUGF0aCgpKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZUl0ZW0uSXNSZWdpc3RlcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGUubmV4dChyb3V0ZUl0ZW0uVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGUubmV4dChyb3V0ZUl0ZW0uVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG8ocm91dGVJdGVtLnJlZGlyZWN0VG8sIHN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5JbnRlcm5hbFJvdXRlciA9ICgwLCB0c2xpYl8xLl9fZGVjb3JhdGUpKFtcbiAgICAoMCwgY29yZV8xLkluamVjdGFibGUpKCksXG4gICAgKDAsIHRzbGliXzEuX19tZXRhZGF0YSkoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEludGVybmFsUm91dGVyKTtcbmV4cG9ydHMuSW50ZXJuYWxSb3V0ZXIgPSBJbnRlcm5hbFJvdXRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbmNvbnN0IGNvcmVfMSA9IHJlcXVpcmUoXCJAcGx1bWVqcy9jb3JlXCIpO1xuY29uc3Qgcnhqc18xID0gcmVxdWlyZShcInJ4anNcIik7XG5jb25zdCBpbnRlcm5hbFJvdXRlcl9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9pbnRlcm5hbFJvdXRlci5zZXJ2aWNlXCIpO1xubGV0IFJvdXRlck91dGxldCA9IGNsYXNzIFJvdXRlck91dGxldCB7XG4gICAgcm91dGVyO1xuICAgIHJlbmRlcmVyO1xuICAgIF90ZW1wbGF0ZSA9ICcnO1xuICAgIF9zdWJzY3JpcHRpb25zID0gbmV3IHJ4anNfMS5TdWJzY3JpcHRpb24oKTtcbiAgICBjb25zdHJ1Y3Rvcihyb3V0ZXIsIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgfVxuICAgIGJlZm9yZU1vdW50KCkge1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zLmFkZCh0aGlzLnJvdXRlci5nZXRUZW1wbGF0ZSgpLnN1YnNjcmliZSgodG1wbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSB0bXBsO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBtb3VudCgpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpO1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZVRvKHBhdGgsIG51bGwpO1xuICAgIH1cbiAgICB1bm1vdW50KCkge1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RlbXBsYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdBcnJheSA9IFtgJHt0aGlzLl90ZW1wbGF0ZX1gXTtcbiAgICAgICAgICAgIHN0cmluZ0FycmF5LnJhdyA9IFtgJHt0aGlzLl90ZW1wbGF0ZX1gXTtcbiAgICAgICAgICAgIHJldHVybiAoMCwgY29yZV8xLmh0bWwpKHN0cmluZ0FycmF5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAoMCwgY29yZV8xLmh0bWwpIGBgO1xuICAgICAgICB9XG4gICAgfVxufTtcblJvdXRlck91dGxldCA9ICgwLCB0c2xpYl8xLl9fZGVjb3JhdGUpKFtcbiAgICAoMCwgY29yZV8xLkNvbXBvbmVudCkoe1xuICAgICAgICBzZWxlY3RvcjogJ3JvdXRlci1vdXRsZXQnXG4gICAgfSksXG4gICAgKDAsIHRzbGliXzEuX19tZXRhZGF0YSkoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbaW50ZXJuYWxSb3V0ZXJfc2VydmljZV8xLkludGVybmFsUm91dGVyLCBjb3JlXzEuUmVuZGVyZXJdKVxuXSwgUm91dGVyT3V0bGV0KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Sb3V0ZXIgPSB2b2lkIDA7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuY29uc3QgY29yZV8xID0gcmVxdWlyZShcIkBwbHVtZWpzL2NvcmVcIik7XG5jb25zdCBicm93c2VyX29yX25vZGVfMSA9IHJlcXVpcmUoXCJicm93c2VyLW9yLW5vZGVcIik7XG5jb25zdCBpbnRlcm5hbFJvdXRlcl9zZXJ2aWNlXzEgPSByZXF1aXJlKFwiLi9pbnRlcm5hbFJvdXRlci5zZXJ2aWNlXCIpO1xuY29uc3Qgc3RhdGljUm91dGVyXzEgPSByZXF1aXJlKFwiLi9zdGF0aWNSb3V0ZXJcIik7XG5sZXQgUm91dGVyID0gY2xhc3MgUm91dGVyIHtcbiAgICBpbnRlcm5hbFJvdXRlcjtcbiAgICBjb25zdHJ1Y3RvcihpbnRlcm5hbFJvdXRlcikge1xuICAgICAgICB0aGlzLmludGVybmFsUm91dGVyID0gaW50ZXJuYWxSb3V0ZXI7XG4gICAgfVxuICAgIGdldEN1cnJlbnRSb3V0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxSb3V0ZXIuZ2V0Q3VycmVudFJvdXRlKCk7XG4gICAgfVxuICAgIG5hdmlnYXRlVG8ocGF0aCwgc3RhdGUpIHtcbiAgICAgICAgdGhpcy5pbnRlcm5hbFJvdXRlci5uYXZpZ2F0ZVRvKHBhdGgsIHN0YXRlKTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyUm91dGVzKHJvdXRlcykge1xuICAgICAgICBpZiAoIWJyb3dzZXJfb3Jfbm9kZV8xLmlzTm9kZSkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocm91dGVzKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgcm91dGUgb2Ygcm91dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRpY1JvdXRlcl8xLlN0YXRpY1JvdXRlci5mb3JtYXRSb3V0ZShyb3V0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ3JvdXRlci5hZGRSb3V0ZXM6IHRoZSBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblJvdXRlciA9ICgwLCB0c2xpYl8xLl9fZGVjb3JhdGUpKFtcbiAgICAoMCwgY29yZV8xLkluamVjdGFibGUpKCksXG4gICAgKDAsIHRzbGliXzEuX19tZXRhZGF0YSkoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbaW50ZXJuYWxSb3V0ZXJfc2VydmljZV8xLkludGVybmFsUm91dGVyXSlcbl0sIFJvdXRlcik7XG5leHBvcnRzLlJvdXRlciA9IFJvdXRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TdGF0aWNSb3V0ZXIgPSB2b2lkIDA7XG5jbGFzcyBTdGF0aWNSb3V0ZXIge1xuICAgIHN0YXRpYyByb3V0TGlzdCA9IFtdO1xuICAgIHN0YXRpYyBjaGVja1BhcmFtcyh1cCwgcikge1xuICAgICAgICBsZXQgcG1jID0gMDtcbiAgICAgICAgY29uc3QgcG8gPSB7fSwgcGMgPSByLlBhcmFtQ291bnQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJ0UGFyYW0gPSByLlBhcmFtc1tpXTtcbiAgICAgICAgICAgIGlmIChydFBhcmFtLmluZGV4T2YoJzonKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcG9bcnRQYXJhbS5zcGxpdCgnOicpWzFdXSA9IHVwW2ldO1xuICAgICAgICAgICAgICAgIHBtYyArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwbWMgPT09IHBjKSB7XG4gICAgICAgICAgICByZXR1cm4gcG87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0UGFyYW1Db3VudChwKSB7XG4gICAgICAgIGxldCBwYyA9IDA7XG4gICAgICAgIHAuZm9yRWFjaCgoaykgPT4ge1xuICAgICAgICAgICAgaWYgKGsuaW5kZXhPZignOicpID49IDApIHtcbiAgICAgICAgICAgICAgICBwYyArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBjO1xuICAgIH1cbiAgICBzdGF0aWMgZm9ybWF0Um91dGUocikge1xuICAgICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgICAgICBQYXJhbXM6IHt9LFxuICAgICAgICAgICAgVXJsOiAnJyxcbiAgICAgICAgICAgIFRlbXBsYXRlOiAnJyxcbiAgICAgICAgICAgIFBhcmFtQ291bnQ6IDAsXG4gICAgICAgICAgICBJc1JlZ2lzdGVyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcmVkaXJlY3RUbzogJycsXG4gICAgICAgICAgICBjYW5BY3RpdmF0ZTogKCkgPT4gdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBvYmouUGFyYW1zID0gci5wYXRoLnNwbGl0KCcvJykuZmlsdGVyKChoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaC5sZW5ndGggPiAwO1xuICAgICAgICB9KTtcbiAgICAgICAgb2JqLlVybCA9IHIucGF0aDtcbiAgICAgICAgb2JqLlRlbXBsYXRlID0gJyc7XG4gICAgICAgIG9iai5yZWRpcmVjdFRvID0gci5yZWRpcmVjdFRvO1xuICAgICAgICBpZiAoci50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgaWYgKCFyLnRlbXBsYXRlUGF0aClcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigndGVtcGxhdGVQYXRoIGlzIHJlcXVpcmVkIGluIHJvdXRlIGlmIHRlbXBsYXRlIGlzIG1lbnRpb25lZC4nKTtcbiAgICAgICAgICAgIG9iai5UZW1wbGF0ZSA9IHIudGVtcGxhdGU7XG4gICAgICAgICAgICBvYmouVGVtcGxhdGVQYXRoID0gci50ZW1wbGF0ZVBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHIuY2FuQWN0aXZhdGUpXG4gICAgICAgICAgICBvYmouY2FuQWN0aXZhdGUgPSByLmNhbkFjdGl2YXRlO1xuICAgICAgICBvYmouUGFyYW1Db3VudCA9IFN0YXRpY1JvdXRlci5nZXRQYXJhbUNvdW50KG9iai5QYXJhbXMpO1xuICAgICAgICBTdGF0aWNSb3V0ZXIucm91dExpc3QucHVzaChvYmopO1xuICAgIH1cbn1cbmV4cG9ydHMuU3RhdGljUm91dGVyID0gU3RhdGljUm91dGVyO1xuIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJyb3V0ZXJfc2VydmljZV8xIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiUm91dGVyIiwidmFsdWUiLCJJbnRlcm5hbFJvdXRlciIsInRzbGliXzEiLCJjb3JlXzEiLCJyeGpzXzEiLCJzdGF0aWNSb3V0ZXJfMSIsIl9jdXJyZW50Um91dGUiLCJwYXRoIiwicGFyYW1zIiwic3RhdGUiLCJfdGVtcGxhdGUiLCJTdWJqZWN0IiwiY29uc3RydWN0b3IiLCJmcm9tRXZlbnQiLCJ3aW5kb3ciLCJzdWJzY3JpYmUiLCJ0aGlzIiwiX3JlZ2lzdGVyT25IYXNoQ2hhbmdlIiwiZ2V0VGVtcGxhdGUiLCJhc09ic2VydmFibGUiLCJnZXRDdXJyZW50Um91dGUiLCJuYXZpZ2F0ZVRvIiwibG9jYXRpb24iLCJoYXNoIiwicmVwbGFjZSIsIl9uYXZpZ2F0ZVRvIiwiX3JvdXRlTWF0Y2hlciIsInJvdXRlIiwiX21hdGNoZXIiLCJSZWdFeHAiLCJtYXRjaCIsInVQYXJhbXMiLCJzcGxpdCIsImZpbHRlciIsImgiLCJsZW5ndGgiLCJyb3V0ZUFyciIsIlN0YXRpY1JvdXRlciIsInJvdXRMaXN0IiwiUGFyYW1zIiwiVXJsIiwicm91dGVJdGVtIiwid3JhcEludG9PYnNlcnZhYmxlIiwiY2FuQWN0aXZhdGUiLCJ2YWwiLCJfcGFyYW1zIiwiY2hlY2tQYXJhbXMiLCJrZXlzIiwiSXNSZWdpc3RlcmVkIiwibmV4dCIsIlRlbXBsYXRlIiwiVGVtcGxhdGVQYXRoIiwicmVkaXJlY3RUbyIsIl9fZGVjb3JhdGUiLCJJbmplY3RhYmxlIiwiX19tZXRhZGF0YSIsImludGVybmFsUm91dGVyX3NlcnZpY2VfMSIsIlJvdXRlck91dGxldCIsInJvdXRlciIsInJlbmRlcmVyIiwiX3N1YnNjcmlwdGlvbnMiLCJTdWJzY3JpcHRpb24iLCJiZWZvcmVNb3VudCIsImFkZCIsInRtcGwiLCJ1cGRhdGUiLCJtb3VudCIsInVubW91bnQiLCJ1bnN1YnNjcmliZSIsInJlbmRlciIsInN0cmluZ0FycmF5IiwicmF3IiwiaHRtbCIsIkNvbXBvbmVudCIsInNlbGVjdG9yIiwiUmVuZGVyZXIiLCJicm93c2VyX29yX25vZGVfMSIsImludGVybmFsUm91dGVyIiwic3RhdGljIiwicm91dGVzIiwiaXNOb2RlIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJmb3JtYXRSb3V0ZSIsInVwIiwiciIsInBtYyIsInBvIiwicGMiLCJQYXJhbUNvdW50IiwiaSIsInJ0UGFyYW0iLCJpbmRleE9mIiwicCIsImZvckVhY2giLCJrIiwib2JqIiwidGVtcGxhdGUiLCJ0ZW1wbGF0ZVBhdGgiLCJnZXRQYXJhbUNvdW50IiwicHVzaCJdLCJzb3VyY2VSb290IjoiIn0=