"use strict";(self.webpackChunkplumejs_example_repo=self.webpackChunkplumejs_example_repo||[]).push([[302],{302:function(e,t,n){n.r(t),n.d(t,{BehaviourSubjectObs:function(){return m},Component:function(){return k},DomTransition:function(){return T},Injectable:function(){return N},InjectionToken:function(){return x},Injector:function(){return a},Renderer:function(){return h},SubjectObs:function(){return b},Subscriptions:function(){return f},fromEvent:function(){return y},html:function(){return u},promisify:function(){return w},render:function(){return d},signal:function(){return i},wrapIntoObservable:function(){return g}});const s=e=>"function"==typeof e,r=Object.create(null);let o=null;function i(e){const t=r[o];let n=e;function i(){return n}return i.set=function(e){n=s(e)?e(n):e,t()},i}const a=new class{map=new WeakMap;register(e,t){if(this.map.get(e))throw Error(`${e} is already registered service.`);this.map.set(e,t)}getService(e){const t=this.map.get(e);if(t)return t;throw Error(`${e} is not a registered provider.`)}removeService(e){this.map.delete(e)}clear(){this.map=new WeakMap}},c=(e,t,n)=>{if(t.length){const s=[];for(const e of t)"RENDERER"!==e.prototype.__metadata__.name?s.push(a.getService(e)):s.push(n);return new e(...s)}return new e},l=new class{globalStyles;style_registry;isRootNodeSet;globalStyleTag;constructor(){try{this.globalStyles=new CSSStyleSheet}catch(e){this.globalStyles=""}this.isRootNodeSet=!1,this.globalStyleTag=null}getComputedCss=(e="",t)=>{let n=[];const s=new CSSStyleSheet;if(s.insertRule(":host { display: block; }"),n=t?[s]:[this.globalStyles,s],e){const t=new CSSStyleSheet;t.replace(e),n.push(t)}return n}},{html:u,render:d}=(()=>{const e=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,t=/<[a-z][^>]+$/i,n=/^attr([^ ]+)/,s=/^insertNode([^ ]+)/;let r=[],o=[];const i=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;","(":"%28",")":"%29"};let n=JSON.stringify(e);const s=e=>t[e]||e;return n=(e=>e.replace(/[&<>\(\)]/g,s))(n),JSON.parse(n)},a=(e,t)=>{const n=e.options,s=Array.isArray(t)?t:[t];let r,o,i=n.length;for(;i--;){o=n[i];const e=o.getAttribute("value")??(o.textContent.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ");(o.selected=s.indexOf(e)>-1)&&(r=!0)}r||(e.selectedIndex=-1)},c=(e,t,n)=>{e[n]=JSON.stringify(t),o.push((()=>{setTimeout((()=>{if(e.isConnected){const n=new CustomEvent("bindprops",{detail:{props:t},bubbles:!1});e.dispatchEvent(n)}}))}))},l=(e,t)=>{const s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let o=s.nextNode();for(;o;){if(o.hasAttributes()){const e=Array.from(o.attributes).filter((e=>n.test(e.nodeName)));for(const{nodeName:s,nodeValue:l}of e){const e=n.exec(s)[1];switch(!0){case/^on+/.test(l):{const n=l.slice(2).toLowerCase();o.removeEventListener(n,t[e]),o.addEventListener(n,t[e]);break}case/ref/.test(l):{const n=function(){this.node.isConnected&&this.fn(this.node)}.bind({node:o,fn:t[e]});r.push(n);break}case/^data-+/.test(l):case/^aria-+/.test(l):"data-input"===l?c(o,t[e],Symbol("input")):o.setAttribute(l,i(t[e]));break;case/class/.test(l):t[e]?o.classList.add(...t[e].split(" ")):o.setAttribute("class","");break;case/value/.test(l):"select"===o.nodeName.toLowerCase()?a(o,t[e]):o.value=i(t[e]);break;case/disabled/.test(l):case/checked/.test(l):t[e]?o.setAttribute(l,t[e]):o.removeAttribute(l);break;default:o.setAttribute(l,i(t[e]))}o.removeAttribute(s)}}o=s.nextNode()}},u=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),d=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent,h=(e,t,n)=>{const s=t?Array.from(t.childNodes):[],r=e?Array.from(e.childNodes):[];let o=s.length-r.length;if(o>0)for(;o>0;o--)s[s.length-o].parentNode.removeChild(s[s.length-o]);r.forEach(((e,r)=>{const o=s[r];if(((e,t)=>{if(!e||!t||1!==e.nodeType||1!==t.nodeType)return;const n=e.attributes,s=t.attributes,r=t.getAttribute("data-preserve-attributes"),o=r&&"true"===r;for(const{name:e,value:r}of n)s[e]&&s[e]===r||t.setAttribute(e,r);if(!o)for(const{name:e}of s)n[e]||t.removeAttribute(e);if("input"===t.tagName.toLowerCase()&&(t.value=e.value),t.tagName.indexOf("-")>-1&&e.tagName.indexOf("-")>-1){const n=Object.getOwnPropertySymbols(e).find((e=>"input"===e.description)),s=Object.getOwnPropertySymbols(t).find((e=>"input"===e.description)),r=n?e[n]:"",o=s?t[s]:"";r&&o&&r!==o&&c(t,JSON.parse(r),s)}})(e,o),n&&o&&1===o.nodeType&&o.tagName.indexOf("-")>-1)return;if(!o)return void(t&&t.appendChild(e));if(u(e)!==u(o))return void o.replaceWith(e);const i=d(e);if(i&&i!==d(o))o.textContent=i;else if(o.childNodes.length>0&&e.childNodes.length<1)o.innerHTML="";else{if(o.childNodes.length<1&&e.childNodes.length>0){const t=document.createDocumentFragment();return h(e,t,!1),void o.appendChild(t)}e.childNodes.length>0&&h(e,o,!0)}}))};return{html:(n,...r)=>{let o="";const{length:i}=n;for(let s=1;s<i;s++){const i=r[s-1];let a=!1;if(o+=n[s-1],e.test(o)&&t.test(o)&&(o=o.replace(e,((e,t,n)=>`attr${s-1}=${n||'"'}${t}${n?"":'"'}`)),a=!0),!a)switch(!0){case Array.isArray(i):case i instanceof DocumentFragment:o+=`\x3c!--insertNode${s-1}--\x3e`;break;case"object"==typeof i&&null!==i:"html"in i&&(o+=i.html);break;default:o+=i||""}}o+=n[i-1];const a=(e=>{const t=document.createElement("template");return t.innerHTML=e,t.content})(o.trim());return l(a,r),((e,t)=>{const n=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,null);let r,o=n.nextNode();for(;o;){if(r=s.exec(o.data)){const s=Array.isArray(t[r[1]])?t[r[1]]:[t[r[1]]];o.replaceWith(...s),n.currentNode=e}o=n.nextNode()}})(a,r),a},render:(e,t)=>{e&&!e.children.length?(e.innerHTML="",e.appendChild(t)):h(t,e,!1),r.forEach((e=>{e()})),r=[],o.forEach((e=>{e()})),o=[]}}})();class h{_hostElement;_shadowRoot;get __metadata__(){return{name:"RENDERER"}}get hostElement(){return this._hostElement}get shadowRoot(){return this._shadowRoot}update;emitEvent;constructor(e,t){this._hostElement=e,this._shadowRoot=t}}Symbol("klass");const p=(()=>{try{return new CSSStyleSheet,!0}catch(e){return!1}})();class b{_callbackCollection={};unsubscribe(e){delete this._callbackCollection[e]}asObservable(){return{subscribe:e=>this.subscribe(e)}}subscribe(e){const t=Math.random().toString(36).substring(2);return this._callbackCollection[t]=e,()=>this.unsubscribe(t)}next(e){for(const t in this._callbackCollection)this._callbackCollection[t](e)}}class m extends b{_initialValue;constructor(e){super(),this._initialValue=e}subscribe(e){const t=super.subscribe(e);return super.next(this._initialValue),t}next(e){this._initialValue=e,super.next(e)}}class f{_subcribers=[];add(e){this._subcribers.push(e)}unsubscribe(){for(const e of this._subcribers)e();this._subcribers=[]}}const g=e=>{return(t=e)&&"function"==typeof t.subscribe?e:(e=>!!e&&"function"==typeof e.then)(e)?(n=Promise.resolve(e),{subscribe:e=>{Promise.resolve(n).then((t=>{e(t)}))}}):(e=>({subscribe:t=>{t(e)}}))(e);var t,n},y=(e,t,n,s=!1)=>(e.addEventListener(t,n,s),()=>{e.removeEventListener(t,n,s)}),S=(e,t)=>{const n=()=>({get(e,t){const s=Object.prototype.toString.call(e[t]);return["[object Object]","[object Array]"].indexOf(s)>-1&&!("__metadata__"in e[t])?new Proxy(e[t],n()):e[t]},set(t,n,s){return t[n]=s,e(),!0}});return class extends t{constructor(...e){return super(...e),new Proxy(this,n())}}},w=()=>{let e;return[new Promise((t=>{e=t})),e]},v={selector:"",root:!1,styles:"",deps:[],standalone:!1},E=(e,t=null)=>{const n=document.createElement("style");return n.innerHTML=e,t&&t.appendChild(n),n},C=(e,t)=>{if((e={...v,...e}).styles=e.styles.toString(),e.root&&!l.isRootNodeSet)l.isRootNodeSet=!0,e.styles&&(l.globalStyleTag=E(e.styles,document.head),l.globalStyles.replace(e.styles));else if(e.root&&l.isRootNodeSet)throw Error("Cannot register duplicate root component in "+e.selector+" component");window.customElements.define(e.selector,class extends HTMLElement{klass;shadow;componentStyleTag=null;internalSubscriptions=new f;renderCount=0;static get observedAttributes(){return t.observedAttributes||[]}constructor(){if(super(),p)this.shadow=this.attachShadow({mode:"open"}),this.shadow.adoptedStyleSheets=l.getComputedCss(e.styles,e.standalone);else{this.shadow=this;const t=e.styles.replaceAll(":host",e.selector);this.componentStyleTag=E(t,document.head)}this.getInstance=this.getInstance.bind(this),this.update=this.update.bind(this),this.setRenderIntoQueue=this.setRenderIntoQueue.bind(this),this.createProxyInstance()}createProxyInstance(){const n=new h(this,this.shadow);n.update=()=>{this.update()},n.emitEvent=(e,t)=>{this.emitEvent(e,t)},this.klass=c(S(this.setRenderIntoQueue,t),e.deps,n)}update(){const e=this.klass.render();"string"==typeof e?this.shadow.innerHTML=(e=>{const t=(e,t)=>(t=t.replace(/\s+/g,"").toLowerCase(),!(!["src","href","xlink:href"].includes(e)||!t.includes("javascript:")&&!t.includes("data:"))||!!e.startsWith("on")||void 0),n=e=>{const n=e.attributes;for(const{name:s,value:r}of n)t(s,r)&&e.removeAttribute(s)},s=e=>{const t=e.children;for(const e of t)n(e),s(e)},r=(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body");return(e=>{const t=e.querySelectorAll("script");for(const e of t)e.remove()})(r),s(r),r.innerHTML})(e):d(this.shadow,e)}emitEvent(e,t){const n=new CustomEvent(e,{detail:t});this.dispatchEvent(n)}setProps(e){for(const[n,s]of Object.entries(e))t.observedProperties.find((e=>e===n))&&(this.klass[n]=s);this.klass.onPropertiesChanged?.()}getInstance(){return this.klass}setRenderIntoQueue(){++this.renderCount,1===this.renderCount&&queueMicrotask((()=>{this.update(),this.renderCount=0}))}connectedCallback(){this.internalSubscriptions.add(y(this,"bindprops",(e=>{const t=e.detail.props;t&&this.setProps(t)}))),this.internalSubscriptions.add(y(this,"refresh_component",(()=>{this.klass.mount?.()}))),this.internalSubscriptions.add(y(window,"onLanguageChange",(()=>{this.update()}))),this.klass.beforeMount&&this.internalSubscriptions.add(function(e,t){const n=function(e,t){const n=o;let s;o=Math.random().toString(36).substring(2),r[o]=e;try{t()}finally{s=o,o=n}return s}(e,t);return function(){delete r[n]}}(this.setRenderIntoQueue,this.klass.beforeMount.bind(this.klass))),this.update(),this.klass.mount?.()}attributeChangedCallback(e,t,n){this.klass.onAttributesChanged?.(e,t,n)}disconnectedCallback(){this.renderCount=1,this.klass.unmount?.(),this.componentStyleTag?.remove(),this.internalSubscriptions.unsubscribe()}})},_={deps:[]},k=e=>t=>{if(e.selector.indexOf("-")<=0)throw new Error("You need at least 1 dash in the custom element name!");window.customElements.get(e.selector)||(Object.defineProperty(t.prototype,"selector",{get(){return e.selector}}),C(e,t))},N=(e={})=>t=>{if(e={..._,...e},t.prototype.__metadata__={name:"SERVICE"},e.deps.some((e=>"RENDERER"===e.prototype.__metadata__?.name)))throw Error("Renderer cannot be a dependency for a service. It should be used with component");const n=c(t,e.deps);a.register(t,n)},x=(e,t)=>{const n="string"==typeof e?{name:e}:e;return a.register(n,t),n};class T{transition="";constructor(){this.whichTransitionEnd()}onTransitionEnd(e,t,n){let s=!1,r=null;const o=()=>{s||(s=!0,t&&t(),r(),r=null)};r=y(e,this.transition,(()=>{o()})),setTimeout(o,n)}animationsComplete(e){return e.getAnimations?Promise.allSettled(e.getAnimations().map((e=>e.finished))):Promise.allSettled([!0])}whichTransitionEnd(){const e=document.createElement("div").style,t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"};for(const n in t)if(void 0!==e[n]){this.transition=t[n];break}}}N()(T)}}]);
//# sourceMappingURL=../sourcemaps/302.js.map